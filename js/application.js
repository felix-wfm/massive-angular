!function(e){}("undefined"==typeof appConfig?this.appConfig={}:appConfig),angular.module("app",["ui.router","hljs","tg.common","tg.extensions","tg.components"]),angular.module("tg.common",[]),angular.module("tg.extensions",[]),angular.module("tg.components",[]),angular.module("app").config(["$logProvider",function(e){"use strict";e.debugEnabled(!0)}]),angular.module("app").config(["$stateProvider","$urlRouterProvider",function(e,t){"use strict";t.otherwise("/"),e.state("home",{url:"/",templateUrl:"./view/home/index.html",controller:"HomeController"}).state("extensions",{url:"/extensions",templateUrl:"./view/extensions/index.html"}).state("extensions.tgComponents",{url:"/tgComponents",templateUrl:"./view/extensions/tgComponents.html",controller:"ComponentsController"}).state("extensions.tgForm",{url:"/tgForm",templateUrl:"./view/extensions/tgForm.html",controller:"FormController"}).state("components",{url:"/components",templateUrl:"./view/components/index.html"}).state("components.tgTypeahead",{url:"/tgTypeahead",templateUrl:"./view/components/tgTypeahead.html",controller:"TypeaheadController"}).state("components.tgDropdown",{url:"/tgDropdown",templateUrl:"./view/components/tgDropdown.html",controller:"DropdownController"}).state("components.tgTabset",{url:"/tgTabset",templateUrl:"./view/components/tgTabset.html",controller:"TabsetController"}).state("components.tgTerritory",{url:"/tgTerritory",templateUrl:"./view/components/tgTerritory.html",controller:"TerritoryController"})}]),function(){"use strict";function e(e){e.toJson=function(e){return angular.toJson(e,!0)}}angular.module("tg.common").controller("AppController",e),e.$inject=["$scope"]}(),function(){"use strict";function e(e){return{restrict:"A",compile:function(t,r){function a(t,r,a){e(function(){hljs.lineNumbersBlock(r.find("code.hljs")[0])})}return{pre:void 0,post:a}}}}angular.module("tg.common").directive("hljs",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(e){return function(t){return e.trustAsHtml(t)}}angular.module("tg.common").filter("tgTrustedHtml",e),e.$inject=["$sce"]}(),function(){"use strict";function e(){function e(e,t){return Object.prototype.toString.call(e)===t}function t(t){return e(t,"[object Object]")}function r(t){return e(t,"[object Array]")}function a(t){return e(t,"[object Function]")}function i(e,i){if(e&&a(i))if(r(e))for(var n=0,o=e.length;o>n;n++)i(e[n],n,e);else if(t(e))for(var c in e)e.hasOwnProperty(c)&&i(e[c],c,e)}function n(e,i,n){if(e&&a(i)){var o;if(r(e)){for(var c=0,d=e.length;d>c;c++)if(o=i(e[c],c,e),void 0!==o)return o}else if(t(e))for(var l in e)if(e.hasOwnProperty(l)&&(o=i(e[l],l,e),void 0!==o))return o}return n}function o(e,t,r){var a=[];return i(e,function(i,n){var o=t(i,n,e);void 0!==o&&(r&&-1!==a.indexOf(o)||a.push(o))}),a}function c(e){if(e&&r(e)){var t=[];return e.reduce(function(e,a){return e&&r(e)?t=e:t.push(e),a&&r(a)?t=t.concat(a):t.push(a),t})}}function d(e){return r(e)?0===e.length:!0}function l(e,t){return r(e)?-1!==e.indexOf(t):!1}function s(e,t,r){if(d(e)===!1){var a=[];e=e.slice(),t=t||", ",r=r||" and ";var i=e.pop();return e.length&&a.push(e.join(t)),a.push(i),a.join(r)}}function p(e,t){return r(e)?(a(t)?e.sort(function(e,r){var a=t(e,r);return a>0?1:0>a?-1:0}):e.sort(),e):void 0}function u(e){var t=e.$root.$$phase;return"$apply"==t||"$digest"==t}function m(e){return e&&a(e.then)}return{isObject:t,isArray:r,isFunction:a,forEach:i,each:n,select:o,expandArray:c,empty:d,has:l,naturalJoin:s,sort:p,isApplyInProgress:u,isPromise:m}}angular.module("tg.components").factory("tgUtilities",e),e.$inject=[]}(),function(){"use strict";function e(e){function t(){var t=e.defer();return t.resolve(r),t.promise}var r=[{id:4,code:"AF",name:"Afghanistan"},{id:8,code:"AL",name:"Albania"},{id:12,code:"DZ",name:"Algeria"},{id:20,code:"AD",name:"Andorra"},{id:24,code:"AO",name:"Angola"},{id:28,code:"AG",name:"Antigua and Barbuda"},{id:31,code:"AZ",name:"Azerbaijan"},{id:32,code:"AR",name:"Argentina"},{id:36,code:"AU",name:"Australia"},{id:40,code:"AT",name:"Austria"},{id:44,code:"BS",name:"Bahamas"},{id:48,code:"BH",name:"Bahrain"},{id:50,code:"BD",name:"Bangladesh"},{id:51,code:"AM",name:"Armenia"},{id:52,code:"BB",name:"Barbados"},{id:56,code:"BE",name:"Belgium"},{id:64,code:"BT",name:"Bhutan"},{id:68,code:"BO",name:"Bolivia"},{id:70,code:"BA",name:"Bosnia and Herzegovina"},{id:72,code:"BW",name:"Botswana"},{id:76,code:"BR",name:"Brazil"},{id:84,code:"BZ",name:"Belize"},{id:90,code:"SB",name:"Solomon Islands"},{id:96,code:"BN",name:"Brunei Darussalam"},{id:100,code:"BG",name:"Bulgaria"},{id:104,code:"MM",name:"Myanmar"},{id:108,code:"BI",name:"Burundi"},{id:112,code:"BY",name:"Belarus"},{id:116,code:"KH",name:"Cambodia"},{id:120,code:"CM",name:"Cameroon"},{id:124,code:"CA",name:"Canada"},{id:132,code:"CV",name:"Cape Verde"},{id:140,code:"CF",name:"Central African Republic"},{id:144,code:"LK",name:"Sri Lanka"},{id:148,code:"TD",name:"Chad"},{id:152,code:"CL",name:"Chile"},{id:156,code:"CN",name:"China"},{id:158,code:"TW",name:"Taiwan"},{id:170,code:"CO",name:"Colombia"},{id:174,code:"KM",name:"Comoros"},{id:178,code:"CG",name:"Congo"},{id:180,code:"CD",name:"Democratic Republic of the Congo"},{id:188,code:"CR",name:"Costa Rica"},{id:191,code:"HR",name:"Croatia"},{id:192,code:"CU",name:"Cuba"},{id:196,code:"CY",name:"Cyprus"},{id:203,code:"CZ",name:"Czech Republic"},{id:204,code:"BJ",name:"Benin"},{id:208,code:"DK",name:"Denmark"},{id:212,code:"DM",name:"Dominica"},{id:214,code:"DO",name:"Dominican Republic"},{id:218,code:"EC",name:"Ecuador"},{id:222,code:"SV",name:"El Salvador"},{id:226,code:"GQ",name:"Equatorial Guinea"},{id:231,code:"ET",name:"Ethiopia"},{id:232,code:"ER",name:"Eritrea"},{id:233,code:"EE",name:"Estonia"},{id:242,code:"FJ",name:"Fiji"},{id:246,code:"FI",name:"Finland"},{id:250,code:"FR",name:"France"},{id:258,code:"PF",name:"French Polynesia"},{id:262,code:"DJ",name:"Djibouti"},{id:266,code:"GA",name:"Gabon"},{id:268,code:"GE",name:"Georgia"},{id:270,code:"GM",name:"Gambia"},{id:276,code:"DE",name:"Germany"},{id:288,code:"GH",name:"Ghana"},{id:296,code:"KI",name:"Kiribati"},{id:300,code:"GR",name:"Greece"},{id:308,code:"GD",name:"Grenada"},{id:320,code:"GT",name:"Guatemala"},{id:324,code:"GN",name:"Guinea"},{id:328,code:"GY",name:"Guyana"},{id:332,code:"HT",name:"Haiti"},{id:336,code:"VA",name:"Holy See (Vatican City State)"},{id:340,code:"HN",name:"Honduras"},{id:344,code:"HK",name:"Hong Kong"},{id:348,code:"HU",name:"Hungary"},{id:352,code:"IS",name:"Iceland"},{id:356,code:"IN",name:"India"},{id:360,code:"ID",name:"Indonesia"},{id:364,code:"IR",name:"Iran"},{id:368,code:"IQ",name:"Iraq"},{id:372,code:"IE",name:"Ireland"},{id:376,code:"IL",name:"Israel"},{id:380,code:"IT",name:"Italy"},{id:384,code:"CI",name:"Cote D'ivoire"},{id:388,code:"JM",name:"Jamaica"},{id:392,code:"JP",name:"Japan"},{id:398,code:"KZ",name:"Kazakhstan"},{id:400,code:"JO",name:"Jordan"},{id:404,code:"KE",name:"Kenya"},{id:408,code:"KP",name:"North Korea"},{id:410,code:"KR",name:"South Korea"},{id:414,code:"KW",name:"Kuwait"},{id:417,code:"KG",name:"Kyrgyzstan"},{id:418,code:"LA",name:"Lao People's Democratic Republic"},{id:422,code:"LB",name:"Lebanon"},{id:426,code:"LS",name:"Lesotho"},{id:428,code:"LV",name:"Latvia"},{id:430,code:"LR",name:"Liberia"},{id:434,code:"LY",name:"Libya"},{id:438,code:"LI",name:"Liechtenstein"},{id:440,code:"LT",name:"Lithuania"},{id:442,code:"LU",name:"Luxembourg"},{id:450,code:"MG",name:"Madagascar"},{id:454,code:"MW",name:"Malawi"},{id:458,code:"MY",name:"Malaysia"},{id:462,code:"MV",name:"Maldives"},{id:466,code:"ML",name:"Mali"},{id:470,code:"MT",name:"Malta"},{id:478,code:"MR",name:"Mauritania"},{id:480,code:"MU",name:"Mauritius"},{id:484,code:"MX",name:"Mexico"},{id:492,code:"MC",name:"Monaco"},{id:496,code:"MN",name:"Mongolia"},{id:498,code:"MD",name:"Moldova"},{id:499,code:"ME",name:"Montenegro"},{id:504,code:"MA",name:"Morocco"},{id:508,code:"MZ",name:"Mozambique"},{id:512,code:"OM",name:"Oman"},{id:516,code:"NA",name:"Namibia"},{id:520,code:"NR",name:"Nauru"},{id:524,code:"NP",name:"Nepal"},{id:528,code:"NL",name:"Netherlands"},{id:540,code:"NC",name:"New Caledonia"},{id:548,code:"VU",name:"Vanuatu"},{id:554,code:"NZ",name:"New Zealand"},{id:558,code:"NI",name:"Nicaragua"},{id:562,code:"NE",name:"Niger"},{id:566,code:"NG",name:"Nigeria"},{id:578,code:"NO",name:"Norway"},{id:583,code:"FM",name:"Micronesia"},{id:584,code:"MH",name:"Marshall Islands"},{id:585,code:"PW",name:"Palau"},{id:586,code:"PK",name:"Pakistan"},{id:591,code:"PA",name:"Panama"},{id:598,code:"PG",name:"Papua New Guinea"},{id:600,code:"PY",name:"Paraguay"},{id:604,code:"PE",name:"Peru"},{id:608,code:"PH",name:"Philippines"},{id:616,code:"PL",name:"Poland"},{id:620,code:"PT",name:"Portugal"},{id:624,code:"GW",name:"Guinea-Bissau"},{id:626,code:"TL",name:"Timor-Leste"},{id:630,code:"PR",name:"Puerto Rico"},{id:634,code:"QA",name:"Qatar"},{id:642,code:"RO",name:"Romania"},{id:643,code:"RU",name:"Russian Federation"},{id:646,code:"RW",name:"Rwanda"},{id:659,code:"KN",name:"Saint Kitts and Nevis"},{id:662,code:"LC",name:"Saint Lucia"},{id:670,code:"VC",name:"Saint Vincent and the Grenadines"},{id:674,code:"SM",name:"San Marino"},{id:678,code:"ST",name:"Sao Tome and Principe"},{id:682,code:"SA",name:"Saudi Arabia"},{id:686,code:"SN",name:"Senegal"},{id:688,code:"RS",name:"Serbia"},{id:690,code:"SC",name:"Seychelles"},{id:694,code:"SL",name:"Sierra Leone"},{id:702,code:"SG",name:"Singapore"},{id:703,code:"SK",name:"Slovakia"},{id:704,code:"VN",name:"Viet Nam"},{id:705,code:"SI",name:"Slovenia"},{id:706,code:"SO",name:"Somalia"},{id:710,code:"ZA",name:"South Africa"},{id:716,code:"ZW",name:"Zimbabwe"},{id:724,code:"ES",name:"Spain"},{id:728,code:"SS",name:"South Sudan"},{id:729,code:"SD",name:"Sudan"},{id:732,code:"EH",name:"Western Sahara"},{id:740,code:"SR",name:"Suriname"},{id:748,code:"SZ",name:"Swaziland"},{id:752,code:"SE",name:"Sweden"},{id:756,code:"CH",name:"Switzerland"},{id:760,code:"SY",name:"Syrian Arab Republic"},{id:762,code:"TJ",name:"Tajikistan"},{id:764,code:"TH",name:"Thailand"},{id:768,code:"TG",name:"Togo"},{id:776,code:"TO",name:"Tonga"},{id:780,code:"TT",name:"Trinidad and Tobago"},{id:784,code:"AE",name:"United Arab Emirates"},{id:788,code:"TN",name:"Tunisia"},{id:792,code:"TR",name:"Turkey"},{id:795,code:"TM",name:"Turkmenistan"},{id:798,code:"TV",name:"Tuvalu"},{id:800,code:"UG",name:"Uganda"},{id:804,code:"UA",name:"Ukraine"},{id:807,code:"MK",name:"Macedonia"},{id:818,code:"EG",name:"Egypt"},{id:826,code:"GB",name:"United Kingdom"},{id:834,code:"TZ",name:"Tanzania"},{id:840,code:"US",name:"United States"},{id:854,code:"BF",name:"Burkina Faso"},{id:858,code:"UY",name:"Uruguay"},{id:860,code:"UZ",name:"Uzbekistan"},{id:862,code:"VE",name:"Venezuela"},{id:882,code:"WS",name:"Samoa"},{id:887,code:"YE",name:"Yemen"},{id:894,code:"ZM",name:"Zambia"}];return{getCountries:t}}angular.module("tg.common").service("DataService",e),e.$inject=["$q"]}(),angular.module("app").controller("DropdownController",["$scope",function(e){"use strict"}]),angular.module("app").controller("TerritoryController",["$scope","tgTerritoryUtilities",function(e,t){"use strict";e.source={data:{clusters:[{id:1e4,type:"CONTINENT",active:!0,title:"Europe",territory_count:45,territory_ids:[70,203,336,276,8,470,196,616,348,674,620,826,804,703,807,20,752,208,756,688,440,372,100,578,442,233,705,380,40,438,643,498,499,642,492,250,352,528,191,428,112,246,56,724,300],alphanumeric_code:"",ext_alphanumeric_code:""},{id:10003,type:"CONTINENT",active:!0,title:"Asia",territory_count:48,territory_ids:[410,608,408,4,414,64,682,887,400,344,702,762,462,626,760,392,156,458,398,158,764,144,634,31,268,512,368,96,784,524,704,586,496,795,376,104,792,860,356,51,50,48,116,364,417,418,360,422],alphanumeric_code:"",ext_alphanumeric_code:""},{id:10002,type:"CONTINENT",active:!0,title:"Africa",territory_count:55,territory_ids:[686,140,818,678,12,132,404,566,800,262,562,266,694,24,384,690,148,270,516,788,174,434,646,288,426,768,430,178,180,478,204,748,466,72,894,324,624,454,450,508,504,716,854,232,231,108,706,226,710,728,834,729,732,480,120],alphanumeric_code:"",ext_alphanumeric_code:""},{id:10001,type:"CONTINENT",active:!0,title:"Australia and Oceania",territory_count:16,territory_ids:[548,882,36,583,584,585,798,520,554,258,598,296,540,242,776,90],alphanumeric_code:"",ext_alphanumeric_code:""},{id:10005,type:"CONTINENT",active:!0,title:"North America",territory_count:24,territory_ids:[340,308,558,192,44,591,84,670,222,630,188,320,52,212,484,780,214,840,332,662,124,28,388,659],alphanumeric_code:"",ext_alphanumeric_code:""},{id:10004,type:"CONTINENT",active:!0,title:"South America",territory_count:12,territory_ids:[68,152,170,32,218,76,600,858,604,862,328,740],alphanumeric_code:"",ext_alphanumeric_code:""}],true_clusters:[{id:2103,type:"CLUSTER",active:!0,title:"Antilles",territory_count:13,territory_ids:[308,192,670,630,52,212,662,332,780,214,28,388,659],alphanumeric_code:"2AN",ext_alphanumeric_code:""},{id:2122,type:"CLUSTER",active:!0,title:"European Continent",territory_count:40,territory_ids:[70,203,276,336,8,616,348,674,620,804,703,807,20,752,208,756,688,440,100,578,442,233,705,380,40,438,643,498,499,642,492,250,528,191,428,112,246,56,724,300],alphanumeric_code:"2EC",ext_alphanumeric_code:""},{id:2127,type:"CLUSTER",active:!0,title:"Nordic Countries",territory_count:5,territory_ids:[578,352,246,752,208],alphanumeric_code:"2NC",ext_alphanumeric_code:""},{id:2113,type:"CLUSTER",active:!0,title:"Central America",territory_count:7,territory_ids:[84,222,340,188,320,558,591],alphanumeric_code:"2CA",ext_alphanumeric_code:""},{id:2107,type:"CLUSTER",active:!0,title:"Australasia",territory_count:6,territory_ids:[548,36,540,554,242,90],alphanumeric_code:"2AA",ext_alphanumeric_code:""},{id:2124,type:"CLUSTER",active:!0,title:"GSA Countries",territory_count:3,territory_ids:[276,40,756],alphanumeric_code:"2GC",ext_alphanumeric_code:""},{id:2133,type:"CLUSTER",active:!0,title:"South East Asia",territory_count:11,territory_ids:[702,626,608,116,458,96,764,704,418,360,104],alphanumeric_code:"2SE",ext_alphanumeric_code:""},{id:2131,type:"CLUSTER",active:!0,title:"Scandinavia",territory_count:3,territory_ids:[578,752,208],alphanumeric_code:"2SC",ext_alphanumeric_code:""},{id:2119,type:"CLUSTER",active:!0,title:"Eastern Europe",territory_count:14,territory_ids:[804,440,703,100,428,233,203,112,8,616,348,643,498,642],alphanumeric_code:"2EE",ext_alphanumeric_code:""},{id:2109,type:"CLUSTER",active:!0,title:"Baltic States",territory_count:3,territory_ids:[440,428,233],alphanumeric_code:"2BS",ext_alphanumeric_code:""},{id:2102,type:"CLUSTER",active:!0,title:"American Continent",territory_count:22,territory_ids:[68,170,32,340,76,558,858,862,740,591,152,84,222,218,320,188,484,600,840,124,604,328],alphanumeric_code:"2AC",ext_alphanumeric_code:""},{id:2125,type:"CLUSTER",active:!0,title:"Middle East",territory_count:19,territory_ids:[64,414,512,4,368,682,887,784,524,586,400,496,356,50,462,48,364,144,634],alphanumeric_code:"2ME",ext_alphanumeric_code:""},{id:2101,type:"CLUSTER",active:!0,title:"America",territory_count:36,territory_ids:[68,340,558,76,192,740,152,84,222,630,320,218,212,214,332,28,328,388,170,32,308,858,862,44,591,670,188,52,484,600,662,840,780,124,604,659],alphanumeric_code:"2AM",ext_alphanumeric_code:""},{id:2128,type:"CLUSTER",active:!0,title:"North Africa",territory_count:5,territory_ids:[788,504,818,434,12],alphanumeric_code:"2NF",ext_alphanumeric_code:""},{id:2108,type:"CLUSTER",active:!0,title:"Balkans",territory_count:10,territory_ids:[100,70,807,191,8,705,300,688,642,499],alphanumeric_code:"2BA",ext_alphanumeric_code:""},{id:2134,type:"CLUSTER",active:!0,title:"West Indies",territory_count:14,territory_ids:[308,192,44,670,630,52,212,662,332,780,214,28,388,659],alphanumeric_code:"2WI",ext_alphanumeric_code:""},{id:2111,type:"CLUSTER",active:!0,title:"British Isles",territory_count:2,territory_ids:[372,826],alphanumeric_code:"2BI",ext_alphanumeric_code:""}],countries:[{id:120,type:"COUNTRY",active:!0,title:"Cameroon",territory_count:0,territory_ids:[],alphanumeric_code:"CM",ext_alphanumeric_code:"CMR"},{id:340,type:"COUNTRY",active:!0,title:"Honduras",territory_count:0,territory_ids:[],alphanumeric_code:"HN",ext_alphanumeric_code:"HND"},{id:604,type:"COUNTRY",active:!0,title:"Peru",territory_count:0,territory_ids:[],alphanumeric_code:"PE",ext_alphanumeric_code:"PER"},{id:56,type:"COUNTRY",active:!0,title:"Belgium",territory_count:0,territory_ids:[],alphanumeric_code:"BE",ext_alphanumeric_code:"BEL"},{id:690,type:"COUNTRY",active:!0,title:"Seychelles",territory_count:0,territory_ids:[],alphanumeric_code:"SC",ext_alphanumeric_code:"SYC"},{id:392,type:"COUNTRY",active:!0,title:"Japan",territory_count:0,territory_ids:[],alphanumeric_code:"JP",ext_alphanumeric_code:"JPN"},{id:300,type:"COUNTRY",active:!0,title:"Greece",territory_count:0,territory_ids:[],alphanumeric_code:"GR",ext_alphanumeric_code:"GRC"},{id:674,type:"COUNTRY",active:!0,title:"San Marino",territory_count:0,territory_ids:[],alphanumeric_code:"SM",ext_alphanumeric_code:"SMR"},{id:860,type:"COUNTRY",active:!0,title:"Uzbekistan",territory_count:0,territory_ids:[],alphanumeric_code:"UZ",ext_alphanumeric_code:"UZB"},{id:266,type:"COUNTRY",active:!0,title:"Gabon",territory_count:0,territory_ids:[],alphanumeric_code:"GA",ext_alphanumeric_code:"GAB"},{id:72,type:"COUNTRY",active:!0,title:"Botswana",territory_count:0,territory_ids:[],alphanumeric_code:"BW",ext_alphanumeric_code:"BWA"},{id:214,type:"COUNTRY",active:!0,title:"Dominican Republic",territory_count:0,territory_ids:[],alphanumeric_code:"DO",ext_alphanumeric_code:"DOM"},{id:858,type:"COUNTRY",active:!0,title:"Uruguay",territory_count:0,territory_ids:[],alphanumeric_code:"UY",ext_alphanumeric_code:"URY"},{id:158,type:"COUNTRY",active:!0,title:"Taiwan",territory_count:0,territory_ids:[],alphanumeric_code:"TW",ext_alphanumeric_code:"TWN"},{id:470,type:"COUNTRY",active:!0,title:"Malta",territory_count:0,territory_ids:[],alphanumeric_code:"MT",ext_alphanumeric_code:"MLT"},{id:528,type:"COUNTRY",active:!0,title:"Netherlands",territory_count:0,territory_ids:[],alphanumeric_code:"NL",ext_alphanumeric_code:"NLD"},{id:788,type:"COUNTRY",active:!0,title:"Tunisia",territory_count:0,territory_ids:[],alphanumeric_code:"TN",ext_alphanumeric_code:"TUN"},{id:233,type:"COUNTRY",active:!0,title:"Estonia",territory_count:0,territory_ids:[],alphanumeric_code:"EE",ext_alphanumeric_code:"EST"},{id:600,type:"COUNTRY",active:!0,title:"Paraguay",territory_count:0,territory_ids:[],alphanumeric_code:"PY",ext_alphanumeric_code:"PRY"},{id:585,type:"COUNTRY",active:!0,title:"Palau",territory_count:0,territory_ids:[],alphanumeric_code:"PW",ext_alphanumeric_code:"PLW"},{id:458,type:"COUNTRY",active:!0,title:"Malaysia",territory_count:0,territory_ids:[],alphanumeric_code:"MY",ext_alphanumeric_code:"MYS"},{id:682,type:"COUNTRY",active:!0,title:"Saudi Arabia",territory_count:0,territory_ids:[],alphanumeric_code:"SA",ext_alphanumeric_code:"SAU"},{id:428,type:"COUNTRY",active:!0,title:"Latvia",territory_count:0,territory_ids:[],alphanumeric_code:"LV",ext_alphanumeric_code:"LVA"},{id:608,type:"COUNTRY",active:!0,title:"Philippines",territory_count:0,territory_ids:[],alphanumeric_code:"PH",ext_alphanumeric_code:"PHL"},{id:404,type:"COUNTRY",active:!0,title:"Kenya",territory_count:0,territory_ids:[],alphanumeric_code:"KE",ext_alphanumeric_code:"KEN"},{id:232,type:"COUNTRY",active:!0,title:"Eritrea",territory_count:0,territory_ids:[],alphanumeric_code:"ER",ext_alphanumeric_code:"ERI"},{id:108,type:"COUNTRY",active:!0,title:"Burundi",territory_count:0,territory_ids:[],alphanumeric_code:"BI",ext_alphanumeric_code:"BDI"},{id:170,type:"COUNTRY",active:!0,title:"Colombia",territory_count:0,territory_ids:[],alphanumeric_code:"CO",ext_alphanumeric_code:"COL"},{id:208,type:"COUNTRY",active:!0,title:"Denmark",territory_count:0,territory_ids:[],alphanumeric_code:"DK",ext_alphanumeric_code:"DNK"},{id:84,type:"COUNTRY",active:!0,title:"Belize",territory_count:0,territory_ids:[],alphanumeric_code:"BZ",ext_alphanumeric_code:"BLZ"},{id:894,type:"COUNTRY",active:!0,title:"Zambia",territory_count:0,territory_ids:[],alphanumeric_code:"ZM",ext_alphanumeric_code:"ZMB"},{id:729,type:"COUNTRY",active:!0,title:"Sudan",territory_count:0,territory_ids:[],alphanumeric_code:"SD",ext_alphanumeric_code:"SDN"},{id:180,type:"COUNTRY",active:!0,title:"Democratic Republic of the Congo",territory_count:0,territory_ids:[],alphanumeric_code:"CD",ext_alphanumeric_code:"COD"},{id:368,type:"COUNTRY",active:!0,title:"Iraq",territory_count:0,territory_ids:[],alphanumeric_code:"IQ",ext_alphanumeric_code:"IRQ"},{id:196,type:"COUNTRY",active:!0,title:"Cyprus",territory_count:0,territory_ids:[],alphanumeric_code:"CY",ext_alphanumeric_code:"CYP"},{id:218,type:"COUNTRY",active:!0,title:"Ecuador",territory_count:0,territory_ids:[],alphanumeric_code:"EC",ext_alphanumeric_code:"ECU"},{id:262,type:"COUNTRY",active:!0,title:"Djibouti",territory_count:0,territory_ids:[],alphanumeric_code:"DJ",ext_alphanumeric_code:"DJI"},{id:288,type:"COUNTRY",active:!0,title:"Ghana",territory_count:0,territory_ids:[],alphanumeric_code:"GH",ext_alphanumeric_code:"GHA"},{id:492,type:"COUNTRY",active:!0,title:"Monaco",territory_count:0,territory_ids:[],alphanumeric_code:"MC",ext_alphanumeric_code:"MCO"},{id:356,type:"COUNTRY",active:!0,title:"India",territory_count:0,territory_ids:[],alphanumeric_code:"IN",ext_alphanumeric_code:"IND"},{id:48,type:"COUNTRY",active:!0,title:"Bahrain",territory_count:0,territory_ids:[],alphanumeric_code:"BH",ext_alphanumeric_code:"BHR"},{id:408,type:"COUNTRY",active:!0,title:"North Korea",territory_count:0,territory_ids:[],alphanumeric_code:"KP",ext_alphanumeric_code:"PRK"},{id:728,type:"COUNTRY",active:!0,title:"South Sudan",territory_count:0,territory_ids:[],alphanumeric_code:"SS",ext_alphanumeric_code:"SSD"},{id:372,type:"COUNTRY",active:!0,title:"Ireland",territory_count:0,territory_ids:[],alphanumeric_code:"IE",ext_alphanumeric_code:"IRL"},{id:748,type:"COUNTRY",active:!0,title:"Swaziland",territory_count:0,territory_ids:[],alphanumeric_code:"SZ",ext_alphanumeric_code:"SWZ"},{id:250,type:"COUNTRY",active:!0,title:"France",territory_count:0,territory_ids:[],alphanumeric_code:"FR",ext_alphanumeric_code:"FRA"},{id:192,type:"COUNTRY",active:!0,title:"Cuba",territory_count:0,territory_ids:[],alphanumeric_code:"CU",ext_alphanumeric_code:"CUB"},{id:566,type:"COUNTRY",active:!0,title:"Nigeria",territory_count:0,territory_ids:[],alphanumeric_code:"NG",ext_alphanumeric_code:"NGA"},{id:478,type:"COUNTRY",active:!0,title:"Mauritania",territory_count:0,territory_ids:[],alphanumeric_code:"MR",ext_alphanumeric_code:"MRT"},{id:124,type:"COUNTRY",active:!0,title:"Canada",territory_count:0,territory_ids:[],alphanumeric_code:"CA",ext_alphanumeric_code:"CAN"},{id:50,type:"COUNTRY",active:!0,title:"Bangladesh",territory_count:0,territory_ids:[],alphanumeric_code:"BD",ext_alphanumeric_code:"BGD"},{id:548,type:"COUNTRY",active:!0,title:"Vanuatu",territory_count:0,territory_ids:[],alphanumeric_code:"VU",ext_alphanumeric_code:"VUT"},{id:68,type:"COUNTRY",active:!0,title:"Bolivia",territory_count:0,territory_ids:[],alphanumeric_code:"BO",ext_alphanumeric_code:"BOL"},{id:344,type:"COUNTRY",active:!0,title:"Hong Kong",territory_count:0,territory_ids:[],alphanumeric_code:"HK",ext_alphanumeric_code:"HKG"},{id:70,type:"COUNTRY",active:!0,title:"Bosnia and Herzegovina",territory_count:0,territory_ids:[],alphanumeric_code:"BA",ext_alphanumeric_code:"BIH"},{id:438,type:"COUNTRY",active:!0,title:"Liechtenstein",territory_count:0,territory_ids:[],alphanumeric_code:"LI",ext_alphanumeric_code:"LIE"},{id:388,type:"COUNTRY",active:!0,title:"Jamaica",territory_count:0,territory_ids:[],alphanumeric_code:"JM",ext_alphanumeric_code:"JAM"},{id:624,type:"COUNTRY",active:!0,title:"Guinea-Bissau",territory_count:0,territory_ids:[],alphanumeric_code:"GW",ext_alphanumeric_code:"GNB"},{id:740,type:"COUNTRY",active:!0,title:"Suriname",territory_count:0,territory_ids:[],alphanumeric_code:"SR",ext_alphanumeric_code:"SUR"},{id:44,type:"COUNTRY",active:!0,title:"Bahamas",territory_count:0,territory_ids:[],alphanumeric_code:"BS",ext_alphanumeric_code:"BHS"},{id:100,type:"COUNTRY",active:!0,title:"Bulgaria",territory_count:0,territory_ids:[],alphanumeric_code:"BG",ext_alphanumeric_code:"BGR"},{id:504,type:"COUNTRY",active:!0,title:"Morocco",territory_count:0,territory_ids:[],alphanumeric_code:"MA",ext_alphanumeric_code:"MAR"},{id:764,type:"COUNTRY",active:!0,title:"Thailand",territory_count:0,territory_ids:[],alphanumeric_code:"TH",ext_alphanumeric_code:"THA"},{id:686,type:"COUNTRY",active:!0,title:"Senegal",territory_count:0,territory_ids:[],alphanumeric_code:"SN",ext_alphanumeric_code:"SEN"},{id:270,type:"COUNTRY",active:!0,title:"Gambia",territory_count:0,territory_ids:[],alphanumeric_code:"GM",ext_alphanumeric_code:"GMB"},{id:246,type:"COUNTRY",active:!0,title:"Finland",territory_count:0,territory_ids:[],alphanumeric_code:"FI",ext_alphanumeric_code:"FIN"},{id:780,type:"COUNTRY",active:!0,title:"Trinidad and Tobago",territory_count:0,territory_ids:[],alphanumeric_code:"TT",ext_alphanumeric_code:"TTO"},{id:104,type:"COUNTRY",active:!0,title:"Myanmar",territory_count:0,territory_ids:[],alphanumeric_code:"MM",ext_alphanumeric_code:"MMR"},{id:336,type:"COUNTRY",active:!0,title:"Holy See (Vatican City State)",territory_count:0,territory_ids:[],alphanumeric_code:"VA",ext_alphanumeric_code:"VAT"},{id:417,type:"COUNTRY",active:!0,title:"Kyrgyzstan",territory_count:0,territory_ids:[],alphanumeric_code:"KG",ext_alphanumeric_code:"KGZ"},{id:756,type:"COUNTRY",active:!0,title:"Switzerland",territory_count:0,territory_ids:[],alphanumeric_code:"CH",ext_alphanumeric_code:"CHE"},{id:646,type:"COUNTRY",active:!0,title:"Rwanda",territory_count:0,territory_ids:[],alphanumeric_code:"RW",ext_alphanumeric_code:"RWA"},{id:598,type:"COUNTRY",active:!0,title:"Papua New Guinea",territory_count:0,territory_ids:[],alphanumeric_code:"PG",ext_alphanumeric_code:"PNG"},{id:414,type:"COUNTRY",active:!0,title:"Kuwait",territory_count:0,territory_ids:[],alphanumeric_code:"KW",ext_alphanumeric_code:"KWT"},{id:586,type:"COUNTRY",active:!0,title:"Pakistan",territory_count:0,territory_ids:[],alphanumeric_code:"PK",ext_alphanumeric_code:"PAK"},{id:882,type:"COUNTRY",active:!0,title:"Samoa",territory_count:0,territory_ids:[],alphanumeric_code:"WS",ext_alphanumeric_code:"WSM"},{id:496,type:"COUNTRY",active:!0,title:"Mongolia",territory_count:0,territory_ids:[],alphanumeric_code:"MN",ext_alphanumeric_code:"MNG"},{id:706,type:"COUNTRY",active:!0,title:"Somalia",territory_count:0,territory_ids:[],alphanumeric_code:"SO",ext_alphanumeric_code:"SOM"},{id:242,type:"COUNTRY",active:!0,title:"Fiji",territory_count:0,territory_ids:[],alphanumeric_code:"FJ",ext_alphanumeric_code:"FJI"},{id:584,type:"COUNTRY",active:!0,title:"Marshall Islands",territory_count:0,territory_ids:[],alphanumeric_code:"MH",ext_alphanumeric_code:"MHL"},{id:398,type:"COUNTRY",active:!0,title:"Kazakhstan",territory_count:0,territory_ids:[],alphanumeric_code:"KZ",ext_alphanumeric_code:"KAZ"},{id:430,type:"COUNTRY",active:!0,title:"Liberia",territory_count:0,territory_ids:[],alphanumeric_code:"LR",ext_alphanumeric_code:"LBR"},{id:499,type:"COUNTRY",active:!0,title:"Montenegro",territory_count:0,territory_ids:[],alphanumeric_code:"ME",ext_alphanumeric_code:"MNE"},{id:591,type:"COUNTRY",active:!0,title:"Panama",territory_count:0,territory_ids:[],alphanumeric_code:"PA",ext_alphanumeric_code:"PAN"},{id:826,type:"COUNTRY",active:!0,title:"United Kingdom",territory_count:0,territory_ids:[],alphanumeric_code:"GB",ext_alphanumeric_code:"GBR"},{id:188,type:"COUNTRY",active:!0,title:"Costa Rica",territory_count:0,territory_ids:[],alphanumeric_code:"CR",ext_alphanumeric_code:"CRI"},{id:64,type:"COUNTRY",active:!0,title:"Bhutan",territory_count:0,territory_ids:[],alphanumeric_code:"BT",ext_alphanumeric_code:"BTN"},{id:31,type:"COUNTRY",active:!0,title:"Azerbaijan",territory_count:0,territory_ids:[],alphanumeric_code:"AZ",ext_alphanumeric_code:"AZE"},{id:222,type:"COUNTRY",active:!0,title:"El Salvador",territory_count:0,territory_ids:[],alphanumeric_code:"SV",ext_alphanumeric_code:"SLV"},{id:132,type:"COUNTRY",active:!0,title:"Cape Verde",territory_count:0,territory_ids:[],alphanumeric_code:"CV",ext_alphanumeric_code:"CPV"},{id:466,type:"COUNTRY",active:!0,title:"Mali",territory_count:0,territory_ids:[],alphanumeric_code:"ML",ext_alphanumeric_code:"MLI"},{id:620,type:"COUNTRY",active:!0,title:"Portugal",territory_count:0,territory_ids:[],alphanumeric_code:"PT",ext_alphanumeric_code:"PRT"},{id:462,type:"COUNTRY",active:!0,title:"Maldives",territory_count:0,territory_ids:[],alphanumeric_code:"MV",ext_alphanumeric_code:"MDV"},{id:76,type:"COUNTRY",active:!0,title:"Brazil",territory_count:0,territory_ids:[],alphanumeric_code:"BR",ext_alphanumeric_code:"BRA"},{id:96,type:"COUNTRY",active:!0,title:"Brunei Darussalam",territory_count:0,territory_ids:[],alphanumeric_code:"BN",ext_alphanumeric_code:"BRN"},{id:454,type:"COUNTRY",active:!0,title:"Malawi",territory_count:0,territory_ids:[],alphanumeric_code:"MW",ext_alphanumeric_code:"MWI"},{id:410,type:"COUNTRY",active:!0,title:"South Korea",territory_count:0,territory_ids:[],alphanumeric_code:"KR",ext_alphanumeric_code:"KOR"},{id:144,type:"COUNTRY",active:!0,title:"Sri Lanka",territory_count:0,territory_ids:[],alphanumeric_code:"LK",ext_alphanumeric_code:"LKA"},{id:212,type:"COUNTRY",active:!0,title:"Dominica",territory_count:0,territory_ids:[],alphanumeric_code:"DM",ext_alphanumeric_code:"DMA"},{id:616,type:"COUNTRY",active:!0,title:"Poland",territory_count:0,territory_ids:[],alphanumeric_code:"PL",ext_alphanumeric_code:"POL"},{id:540,type:"COUNTRY",active:!0,title:"New Caledonia",territory_count:0,territory_ids:[],alphanumeric_code:"NC",ext_alphanumeric_code:"NCL"},{id:51,type:"COUNTRY",active:!0,title:"Armenia",territory_count:0,territory_ids:[],alphanumeric_code:"AM",ext_alphanumeric_code:"ARM"},{id:384,type:"COUNTRY",active:!0,title:"Cote D'ivoire",territory_count:0,territory_ids:[],alphanumeric_code:"CI",ext_alphanumeric_code:"CIV"},{id:670,type:"COUNTRY",active:!0,title:"Saint Vincent and the Grenadines",territory_count:0,territory_ids:[],alphanumeric_code:"VC",ext_alphanumeric_code:"VCT"},{id:818,type:"COUNTRY",active:!0,title:"Egypt",territory_count:0,territory_ids:[],alphanumeric_code:"EG",ext_alphanumeric_code:"EGY"},{id:112,type:"COUNTRY",active:!0,title:"Belarus",territory_count:0,territory_ids:[],alphanumeric_code:"BY",ext_alphanumeric_code:"BLR"},{id:634,type:"COUNTRY",active:!0,title:"Qatar",territory_count:0,territory_ids:[],alphanumeric_code:"QA",ext_alphanumeric_code:"QAT"},{id:854,type:"COUNTRY",active:!0,title:"Burkina Faso",territory_count:0,territory_ids:[],alphanumeric_code:"BF",ext_alphanumeric_code:"BFA"},{id:484,type:"COUNTRY",active:!0,title:"Mexico",territory_count:0,territory_ids:[],alphanumeric_code:"MX",ext_alphanumeric_code:"MEX"},{id:792,type:"COUNTRY",active:!0,title:"Turkey",territory_count:0,territory_ids:[],alphanumeric_code:"TR",ext_alphanumeric_code:"TUR"},{id:558,type:"COUNTRY",active:!0,title:"Nicaragua",territory_count:0,territory_ids:[],alphanumeric_code:"NI",ext_alphanumeric_code:"NIC"},{id:418,type:"COUNTRY",active:!0,title:"Lao People's Democratic Republic",territory_count:0,territory_ids:[],alphanumeric_code:"LA",ext_alphanumeric_code:"LAO"},{id:798,type:"COUNTRY",active:!0,title:"Tuvalu",territory_count:0,territory_ids:[],alphanumeric_code:"TV",ext_alphanumeric_code:"TUV"},{id:32,type:"COUNTRY",active:!0,title:"Argentina",territory_count:0,territory_ids:[],alphanumeric_code:"AR",ext_alphanumeric_code:"ARG"},{id:152,type:"COUNTRY",active:!0,title:"Chile",territory_count:0,territory_ids:[],alphanumeric_code:"CL",ext_alphanumeric_code:"CHL"},{id:174,type:"COUNTRY",active:!0,title:"Comoros",territory_count:0,territory_ids:[],alphanumeric_code:"KM",ext_alphanumeric_code:"COM"
},{id:762,type:"COUNTRY",active:!0,title:"Tajikistan",territory_count:0,territory_ids:[],alphanumeric_code:"TJ",ext_alphanumeric_code:"TJK"},{id:422,type:"COUNTRY",active:!0,title:"Lebanon",territory_count:0,territory_ids:[],alphanumeric_code:"LB",ext_alphanumeric_code:"LBN"},{id:512,type:"COUNTRY",active:!0,title:"Oman",territory_count:0,territory_ids:[],alphanumeric_code:"OM",ext_alphanumeric_code:"OMN"},{id:8,type:"COUNTRY",active:!0,title:"Albania",territory_count:0,territory_ids:[],alphanumeric_code:"AL",ext_alphanumeric_code:"ALB"},{id:694,type:"COUNTRY",active:!0,title:"Sierra Leone",territory_count:0,territory_ids:[],alphanumeric_code:"SL",ext_alphanumeric_code:"SLE"},{id:426,type:"COUNTRY",active:!0,title:"Lesotho",territory_count:0,territory_ids:[],alphanumeric_code:"LS",ext_alphanumeric_code:"LSO"},{id:276,type:"COUNTRY",active:!0,title:"Germany",territory_count:0,territory_ids:[],alphanumeric_code:"DE",ext_alphanumeric_code:"DEU"},{id:630,type:"COUNTRY",active:!0,title:"Puerto Rico",territory_count:0,territory_ids:[],alphanumeric_code:"PR",ext_alphanumeric_code:"PRI"},{id:442,type:"COUNTRY",active:!0,title:"Luxembourg",territory_count:0,territory_ids:[],alphanumeric_code:"LU",ext_alphanumeric_code:"LUX"},{id:862,type:"COUNTRY",active:!0,title:"Venezuela",territory_count:0,territory_ids:[],alphanumeric_code:"VE",ext_alphanumeric_code:"VEN"},{id:148,type:"COUNTRY",active:!0,title:"Chad",territory_count:0,territory_ids:[],alphanumeric_code:"TD",ext_alphanumeric_code:"TCD"},{id:434,type:"COUNTRY",active:!0,title:"Libya",territory_count:0,territory_ids:[],alphanumeric_code:"LY",ext_alphanumeric_code:"LBY"},{id:752,type:"COUNTRY",active:!0,title:"Sweden",territory_count:0,territory_ids:[],alphanumeric_code:"SE",ext_alphanumeric_code:"SWE"},{id:40,type:"COUNTRY",active:!0,title:"Austria",territory_count:0,territory_ids:[],alphanumeric_code:"AT",ext_alphanumeric_code:"AUT"},{id:710,type:"COUNTRY",active:!0,title:"South Africa",territory_count:0,territory_ids:[],alphanumeric_code:"ZA",ext_alphanumeric_code:"ZAF"},{id:28,type:"COUNTRY",active:!0,title:"Antigua and Barbuda",territory_count:0,territory_ids:[],alphanumeric_code:"AG",ext_alphanumeric_code:"ATG"},{id:705,type:"COUNTRY",active:!0,title:"Slovenia",territory_count:0,territory_ids:[],alphanumeric_code:"SI",ext_alphanumeric_code:"SVN"},{id:231,type:"COUNTRY",active:!0,title:"Ethiopia",territory_count:0,territory_ids:[],alphanumeric_code:"ET",ext_alphanumeric_code:"ETH"},{id:520,type:"COUNTRY",active:!0,title:"Nauru",territory_count:0,territory_ids:[],alphanumeric_code:"NR",ext_alphanumeric_code:"NRU"},{id:562,type:"COUNTRY",active:!0,title:"Niger",territory_count:0,territory_ids:[],alphanumeric_code:"NE",ext_alphanumeric_code:"NER"},{id:258,type:"COUNTRY",active:!0,title:"French Polynesia",territory_count:0,territory_ids:[],alphanumeric_code:"PF",ext_alphanumeric_code:"PYF"},{id:4,type:"COUNTRY",active:!0,title:"Afghanistan",territory_count:0,territory_ids:[],alphanumeric_code:"AF",ext_alphanumeric_code:"AFG"},{id:642,type:"COUNTRY",active:!0,title:"Romania",territory_count:0,territory_ids:[],alphanumeric_code:"RO",ext_alphanumeric_code:"ROM"},{id:204,type:"COUNTRY",active:!0,title:"Benin",territory_count:0,territory_ids:[],alphanumeric_code:"BJ",ext_alphanumeric_code:"BEN"},{id:156,type:"COUNTRY",active:!0,title:"China",territory_count:0,territory_ids:[],alphanumeric_code:"CN",ext_alphanumeric_code:"CHN"},{id:226,type:"COUNTRY",active:!0,title:"Equatorial Guinea",territory_count:0,territory_ids:[],alphanumeric_code:"GQ",ext_alphanumeric_code:"GNQ"},{id:52,type:"COUNTRY",active:!0,title:"Barbados",territory_count:0,territory_ids:[],alphanumeric_code:"BB",ext_alphanumeric_code:"BRB"},{id:36,type:"COUNTRY",active:!0,title:"Australia",territory_count:0,territory_ids:[],alphanumeric_code:"AU",ext_alphanumeric_code:"AUS"},{id:659,type:"COUNTRY",active:!0,title:"Saint Kitts and Nevis",territory_count:0,territory_ids:[],alphanumeric_code:"KN",ext_alphanumeric_code:"KNA"},{id:804,type:"COUNTRY",active:!0,title:"Ukraine",territory_count:0,territory_ids:[],alphanumeric_code:"UA",ext_alphanumeric_code:"UKR"},{id:24,type:"COUNTRY",active:!0,title:"Angola",territory_count:0,territory_ids:[],alphanumeric_code:"AO",ext_alphanumeric_code:"AGO"},{id:296,type:"COUNTRY",active:!0,title:"Kiribati",territory_count:0,territory_ids:[],alphanumeric_code:"KI",ext_alphanumeric_code:"KIR"},{id:702,type:"COUNTRY",active:!0,title:"Singapore",territory_count:0,territory_ids:[],alphanumeric_code:"SG",ext_alphanumeric_code:"SGP"},{id:320,type:"COUNTRY",active:!0,title:"Guatemala",territory_count:0,territory_ids:[],alphanumeric_code:"GT",ext_alphanumeric_code:"GTM"},{id:776,type:"COUNTRY",active:!0,title:"Tonga",territory_count:0,territory_ids:[],alphanumeric_code:"TO",ext_alphanumeric_code:"TON"},{id:643,type:"COUNTRY",active:!0,title:"Russian Federation",territory_count:0,territory_ids:[],alphanumeric_code:"RU",ext_alphanumeric_code:"RUS"},{id:498,type:"COUNTRY",active:!0,title:"Moldova",territory_count:0,territory_ids:[],alphanumeric_code:"MD",ext_alphanumeric_code:"MDA"},{id:724,type:"COUNTRY",active:!0,title:"Spain",territory_count:0,territory_ids:[],alphanumeric_code:"ES",ext_alphanumeric_code:"ESP"},{id:90,type:"COUNTRY",active:!0,title:"Solomon Islands",territory_count:0,territory_ids:[],alphanumeric_code:"SB",ext_alphanumeric_code:"SLB"},{id:840,type:"COUNTRY",active:!0,title:"United States",territory_count:0,territory_ids:[],alphanumeric_code:"US",ext_alphanumeric_code:"USA"},{id:400,type:"COUNTRY",active:!0,title:"Jordan",territory_count:0,territory_ids:[],alphanumeric_code:"JO",ext_alphanumeric_code:"JOR"},{id:732,type:"COUNTRY",active:!0,title:"Western Sahara",territory_count:0,territory_ids:[],alphanumeric_code:"EH",ext_alphanumeric_code:"ESH"},{id:178,type:"COUNTRY",active:!0,title:"Congo",territory_count:0,territory_ids:[],alphanumeric_code:"CG",ext_alphanumeric_code:"COG"},{id:800,type:"COUNTRY",active:!0,title:"Uganda",territory_count:0,territory_ids:[],alphanumeric_code:"UG",ext_alphanumeric_code:"UGA"},{id:450,type:"COUNTRY",active:!0,title:"Madagascar",territory_count:0,territory_ids:[],alphanumeric_code:"MG",ext_alphanumeric_code:"MDG"},{id:328,type:"COUNTRY",active:!0,title:"Guyana",territory_count:0,territory_ids:[],alphanumeric_code:"GY",ext_alphanumeric_code:"GUY"},{id:20,type:"COUNTRY",active:!0,title:"Andorra",territory_count:0,territory_ids:[],alphanumeric_code:"AD",ext_alphanumeric_code:"AND"},{id:688,type:"COUNTRY",active:!0,title:"Serbia",territory_count:0,territory_ids:[],alphanumeric_code:"RS",ext_alphanumeric_code:"SRB"},{id:768,type:"COUNTRY",active:!0,title:"Togo",territory_count:0,territory_ids:[],alphanumeric_code:"TG",ext_alphanumeric_code:"TGO"},{id:440,type:"COUNTRY",active:!0,title:"Lithuania",territory_count:0,territory_ids:[],alphanumeric_code:"LT",ext_alphanumeric_code:"LTU"},{id:516,type:"COUNTRY",active:!0,title:"Namibia",territory_count:0,territory_ids:[],alphanumeric_code:"NA",ext_alphanumeric_code:"NAM"},{id:578,type:"COUNTRY",active:!0,title:"Norway",territory_count:0,territory_ids:[],alphanumeric_code:"NO",ext_alphanumeric_code:"NOR"},{id:480,type:"COUNTRY",active:!0,title:"Mauritius",territory_count:0,territory_ids:[],alphanumeric_code:"MU",ext_alphanumeric_code:"MUS"},{id:760,type:"COUNTRY",active:!0,title:"Syrian Arab Republic",territory_count:0,territory_ids:[],alphanumeric_code:"SY",ext_alphanumeric_code:"SYR"},{id:352,type:"COUNTRY",active:!0,title:"Iceland",territory_count:0,territory_ids:[],alphanumeric_code:"IS",ext_alphanumeric_code:"ISL"},{id:626,type:"COUNTRY",active:!0,title:"Timor-Leste",territory_count:0,territory_ids:[],alphanumeric_code:"TL",ext_alphanumeric_code:"TLS"},{id:191,type:"COUNTRY",active:!0,title:"Croatia",territory_count:0,territory_ids:[],alphanumeric_code:"HR",ext_alphanumeric_code:"HRV"},{id:703,type:"COUNTRY",active:!0,title:"Slovakia",territory_count:0,territory_ids:[],alphanumeric_code:"SK",ext_alphanumeric_code:"SVK"},{id:364,type:"COUNTRY",active:!0,title:"Iran",territory_count:0,territory_ids:[],alphanumeric_code:"IR",ext_alphanumeric_code:"IRN"},{id:795,type:"COUNTRY",active:!0,title:"Turkmenistan",territory_count:0,territory_ids:[],alphanumeric_code:"TM",ext_alphanumeric_code:"TKM"},{id:678,type:"COUNTRY",active:!0,title:"Sao Tome and Principe",territory_count:0,territory_ids:[],alphanumeric_code:"ST",ext_alphanumeric_code:"STP"},{id:308,type:"COUNTRY",active:!0,title:"Grenada",territory_count:0,territory_ids:[],alphanumeric_code:"GD",ext_alphanumeric_code:"GRD"},{id:268,type:"COUNTRY",active:!0,title:"Georgia",territory_count:0,territory_ids:[],alphanumeric_code:"GE",ext_alphanumeric_code:"GEO"},{id:887,type:"COUNTRY",active:!0,title:"Yemen",territory_count:0,territory_ids:[],alphanumeric_code:"YE",ext_alphanumeric_code:"YEM"},{id:380,type:"COUNTRY",active:!0,title:"Italy",territory_count:0,territory_ids:[],alphanumeric_code:"IT",ext_alphanumeric_code:"ITA"},{id:360,type:"COUNTRY",active:!0,title:"Indonesia",territory_count:0,territory_ids:[],alphanumeric_code:"ID",ext_alphanumeric_code:"IDN"},{id:332,type:"COUNTRY",active:!0,title:"Haiti",territory_count:0,territory_ids:[],alphanumeric_code:"HT",ext_alphanumeric_code:"HTI"},{id:784,type:"COUNTRY",active:!0,title:"United Arab Emirates",territory_count:0,territory_ids:[],alphanumeric_code:"AE",ext_alphanumeric_code:"ARE"},{id:140,type:"COUNTRY",active:!0,title:"Central African Republic",territory_count:0,territory_ids:[],alphanumeric_code:"CF",ext_alphanumeric_code:"CAF"},{id:324,type:"COUNTRY",active:!0,title:"Guinea",territory_count:0,territory_ids:[],alphanumeric_code:"GN",ext_alphanumeric_code:"GIN"},{id:554,type:"COUNTRY",active:!0,title:"New Zealand",territory_count:0,territory_ids:[],alphanumeric_code:"NZ",ext_alphanumeric_code:"NZL"},{id:203,type:"COUNTRY",active:!0,title:"Czech Republic",territory_count:0,territory_ids:[],alphanumeric_code:"CZ",ext_alphanumeric_code:"CZE"},{id:807,type:"COUNTRY",active:!0,title:"Macedonia",territory_count:0,territory_ids:[],alphanumeric_code:"MK",ext_alphanumeric_code:"MKD"},{id:716,type:"COUNTRY",active:!0,title:"Zimbabwe",territory_count:0,territory_ids:[],alphanumeric_code:"ZW",ext_alphanumeric_code:"ZWE"},{id:12,type:"COUNTRY",active:!0,title:"Algeria",territory_count:0,territory_ids:[],alphanumeric_code:"DZ",ext_alphanumeric_code:"DZA"},{id:662,type:"COUNTRY",active:!0,title:"Saint Lucia",territory_count:0,territory_ids:[],alphanumeric_code:"LC",ext_alphanumeric_code:"LCA"},{id:376,type:"COUNTRY",active:!0,title:"Israel",territory_count:0,territory_ids:[],alphanumeric_code:"IL",ext_alphanumeric_code:"ISR"},{id:583,type:"COUNTRY",active:!0,title:"Micronesia",territory_count:0,territory_ids:[],alphanumeric_code:"FM",ext_alphanumeric_code:"FSM"},{id:704,type:"COUNTRY",active:!0,title:"Viet Nam",territory_count:0,territory_ids:[],alphanumeric_code:"VN",ext_alphanumeric_code:"VNM"},{id:116,type:"COUNTRY",active:!0,title:"Cambodia",territory_count:0,territory_ids:[],alphanumeric_code:"KH",ext_alphanumeric_code:"KHM"},{id:348,type:"COUNTRY",active:!0,title:"Hungary",territory_count:0,territory_ids:[],alphanumeric_code:"HU",ext_alphanumeric_code:"HUN"},{id:524,type:"COUNTRY",active:!0,title:"Nepal",territory_count:0,territory_ids:[],alphanumeric_code:"NP",ext_alphanumeric_code:"NPL"},{id:834,type:"COUNTRY",active:!0,title:"Tanzania",territory_count:0,territory_ids:[],alphanumeric_code:"TZ",ext_alphanumeric_code:"TZA"},{id:508,type:"COUNTRY",active:!0,title:"Mozambique",territory_count:0,territory_ids:[],alphanumeric_code:"MZ",ext_alphanumeric_code:"MOZ"}],quickpicks:[{id:10014,type:"QUICK PICK",active:!0,title:"Australasia",territory_count:6,territory_ids:[548,36,540,554,242,90],alphanumeric_code:"",ext_alphanumeric_code:""},{id:10006,type:"QUICK PICK",active:!0,title:"Caribbean",territory_count:13,territory_ids:[308,192,670,630,52,212,662,332,780,214,28,388,659],alphanumeric_code:"",ext_alphanumeric_code:""},{id:10013,type:"QUICK PICK",active:!0,title:"North Africa",territory_count:5,territory_ids:[788,504,818,434,12],alphanumeric_code:"",ext_alphanumeric_code:""},{id:10017,type:"QUICK PICK",active:!0,title:"African Commonwealth Nations",territory_count:19,territory_ids:[508,516,716,748,72,404,894,710,834,288,566,426,800,694,454,690,270,480,120],alphanumeric_code:"",ext_alphanumeric_code:""},{id:10008,type:"QUICK PICK",active:!0,title:"Middle East",territory_count:19,territory_ids:[64,414,512,4,368,682,887,784,524,586,400,496,356,50,462,48,364,144,634],alphanumeric_code:"",ext_alphanumeric_code:""},{id:10007,type:"QUICK PICK",active:!0,title:"Central America",territory_count:7,territory_ids:[84,222,340,188,320,558,591],alphanumeric_code:"",ext_alphanumeric_code:""},{id:10019,type:"QUICK PICK",active:!0,title:"Central Asia",territory_count:8,territory_ids:[51,762,398,417,795,31,268,860],alphanumeric_code:"",ext_alphanumeric_code:""},{id:10016,type:"QUICK PICK",active:!0,title:"Eastern Europe and Balkans",territory_count:20,territory_ids:[440,70,100,203,233,705,8,616,348,643,498,499,642,804,703,807,428,191,112,688],alphanumeric_code:"",ext_alphanumeric_code:""},{id:10010,type:"QUICK PICK",active:!0,title:"Baltic States",territory_count:3,territory_ids:[440,428,233],alphanumeric_code:"",ext_alphanumeric_code:""},{id:10011,type:"QUICK PICK",active:!0,title:"GSA Countries",territory_count:3,territory_ids:[276,40,756],alphanumeric_code:"",ext_alphanumeric_code:""},{id:10012,type:"QUICK PICK",active:!0,title:"Nordic Countries",territory_count:5,territory_ids:[578,352,246,752,208],alphanumeric_code:"",ext_alphanumeric_code:""},{id:10015,type:"QUICK PICK",active:!0,title:"North America",territory_count:3,territory_ids:[484,840,124],alphanumeric_code:"",ext_alphanumeric_code:""},{id:10009,type:"QUICK PICK",active:!0,title:"South East Asia",territory_count:11,territory_ids:[702,626,608,116,458,96,764,704,418,360,104],alphanumeric_code:"",ext_alphanumeric_code:""},{id:10018,type:"QUICK PICK",active:!0,title:"North East Asia",territory_count:6,territory_ids:[410,408,392,156,158,344],alphanumeric_code:"",ext_alphanumeric_code:""}],worldwide:[{id:10021,type:"WORLDWIDE",active:!0,title:"Worldwide",territory_count:200,territory_ids:[548,4,8,558,12,554,566,20,562,24,28,31,516,32,512,36,524,40,520,44,51,50,48,528,52,540,56,68,608,70,64,76,616,72,620,626,84,624,630,634,90,100,578,96,583,584,585,586,108,104,591,116,112,598,600,124,604,120,686,682,140,678,132,674,702,152,703,156,158,694,144,690,148,688,170,174,646,643,642,670,191,188,178,662,180,659,204,203,748,196,192,740,762,760,222,764,218,212,752,214,208,756,716,233,232,231,705,704,706,226,710,728,729,732,250,246,724,242,818,276,826,804,258,807,800,262,266,270,268,788,308,784,798,795,792,288,768,296,780,300,776,882,340,887,336,348,344,894,324,320,332,328,372,368,854,858,380,376,862,860,356,834,352,364,840,360,410,408,414,400,404,392,398,384,388,440,442,434,438,426,428,430,417,418,422,478,470,466,462,458,454,450,508,504,496,498,499,492,484,480],alphanumeric_code:"",ext_alphanumeric_code:""}]}},e.__territory={model1:[]},function(){t.prepareRawData(e.source.data,["WORLDWIDE","CLUSTER","REGION","COUNTRY"])}()}]),function(){"use strict";function e(e,t,r,a,i){e.__typeahead={model1:null,model2:null,model3:[],model4:[],model5:null,model6:[]},e.suggestions=[{id:44,code:"BS",name:"Bahamas"},{id:450,code:"MG",name:"Madagascar"}],e.comparator=function(e,t){return e.code===t.code},e.control={typeahead:{attributes:[{name:"tgTypeaheadId",type:"string",description:""},{name:"tgTypeaheadContext",type:"expression",description:""},{name:"tgTypeaheadPlaceholder",type:"string",description:""},{name:"tgTypeaheadTemplateUrl",type:"string",description:"Set custom typeahead template."},{name:"tgTypeaheadLoaderTemplateUrl",type:"string",description:"Set custom typeahead loader template."},{name:"tgTypeaheadPopupTemplateUrl",type:"string",description:"Set custom typeahead popup template."},{name:"tgTypeaheadPopupHeaderTemplateUrl",type:"string",description:"Set custom typeahead popup header template."},{name:"tgTypeaheadPopupFooterTemplateUrl",type:"string",description:"Set custom typeahead popup footer template."},{name:"tgTypeaheadDataSetsHeaderTemplateUrl",type:"string",description:"Set custom typeahead data set header template."},{name:"tgTypeaheadDataSetsItemTemplateUrl",type:"string",description:"Set custom typeahead data set item template."},{name:"tgTypeaheadDataSetsFooterTemplateUrl",type:"string",description:"Set custom typeahead data set footer template."},{name:"tgTypeaheadSuggestedPopupTemplateUrl",type:"string",description:"Set custom typeahead suggested popup template."},{name:"tgTypeaheadSuggestedPopupHeaderTemplateUrl",type:"string",description:"Set custom typeahead suggested popup header template."},{name:"tgTypeaheadSuggestedPopupFooterTemplateUrl",type:"string",description:"Set custom typeahead suggested popup footer template."},{name:"tgTypeaheadPopupAppendToBody",type:"boolean",description:"Should the typeahead popup be appended to $body instead of the parent element? (default: false)"},{name:"tgTypeaheadPopupStrictWidth",type:"boolean",description:""},{name:"tgTypeaheadWrapClass",type:"string",description:""},{name:"tgTypeaheadMinLength",type:"number",description:"The minimal number of characters that needs to be entered before the typeahead kicks in. The default value is set to 1. If set to 0, the typeahead will try to open on focus."},{name:"tgTypeaheadDelay",type:"number",description:"The minimum waiting time (after the last character was typed) before the typeahead kicks in."},{name:"tgTypeaheadSelected",type:"expression",description:"A callback executed when a match is selected."}]}},e.getResultsAsync=function(e,n){var o=t.defer();return a(function(){i.getCountries().then(function(t){t=r("filter")(t,{name:e}),0===t.length&&(n.dataSet.data.noResults=!0),o.resolve(t)})},2e3),o.promise}}angular.module("app").controller("TypeaheadController",e),e.$inject=["$scope","$q","$filter","$timeout","DataService"]}(),angular.module("app").controller("TabsetController",["$scope",function(e){"use strict"}]),function(){"use strict";function e(e,t,r,a,i,n,o,c,d){return{restrict:"A",require:["tgDropdown","?ngModel"],scope:{tgDropdown:"@",tgDropdownPlaceholder:"@",tgDropdownId:"@",tgDropdownWrapClass:"@",tgDropdownPopupAppendTo:"@",tgDropdownPopupAppendToBody:"@",tgDropdownPopupStrictWidth:"@",tgDropdownSearch:"=",tgDropdownSearchPlaceholder:"@",tgDropdownFilterBy:"@",tgDropdownOrderBy:"=",tgDropdownLimitStep:"@",tgDropdownSelected:"@",tgDropdownDisabled:"=",tgDropdownAddEmpty:"@",tgDropdownEmptyText:"@",tgDropdownSourceOnDemand:"@",tgDropdownComparator:"&"},compile:function(e,l){function s(e){var t=e.match(m);if(!t)throw new Error("Expected dropdown specification in form of '_modelValue_ (as _label_)? for _item_ in _collection_' but got '"+l.tgDropdown+"'.");return{expression:e,itemName:t[3],sourceMapper:a(t[4]),viewMapper:a(t[2]||t[1]),modelMapper:a(t[1])}}function p(e,r,o,d){function l(e,t){var r={};return h.modelMapper.assign(r,t),h.viewMapper.assign(r,e),r[h.itemName]}function p(e){return f[h.itemName]=e,_=h.modelMapper(g,f),f[h.itemName]=null,_}var u=d[0],m=d[1],g=e.$parent,h=s(o.tgDropdown),y=null,f={},_=null,$=null,v=e.tgDropdownFilterBy?a(e.tgDropdownFilterBy):null,T=parseInt(e.tgDropdownLimitStep)||9999,C=e.tgDropdownSelected?a(e.tgDropdownSelected):angular.noop,S="true"===e.tgDropdownSourceOnDemand,w=function(e,t){return angular.equals(e,t)},x=t.get("tgComponentRenderTemplateModel"),U=e.tgDropdownComparator();angular.isFunction(U)&&(w=U),"true"===e.tgDropdownAddEmpty&&($=l(e.tgDropdownEmptyText||null,null)),e.$external=g,e.$templates={main:{wrapper:new x("main.wrapper",o.tgDropdownTemplateUrl||"tg-dropdown.tpl.html"),selectedItem:new x("main.selectedItem",o.tgDropdownSelectedItemTemplateUrl)},popup:{wrapper:new x("popup.wrapper",o.tgDropdownPopupTemplateUrl||"tg-dropdown-popup.tpl.html"),header:new x("popup.header",o.tgDropdownPopupHeaderTemplateUrl),item:new x("popup.item",o.tgDropdownItemTemplateUrl),footer:new x("popup.footer",o.tgDropdownPopupFooterTemplateUrl||"tg-dropdown-popup-footer.tpl.html")}},e.$stateHolder={popup:{opened:!1,updateIntervalID:void 0},limit:T,filter:"",loader:!1,loadDefer:void 0},e.$dataHolder={filteredItems:[]},e.$selectedItem=$,"true"===e.tgDropdownPopupAppendToBody?e.$templates.popup.wrapper.appendTo="body":angular.isString(e.tgDropdownPopupAppendTo)&&(e.$templates.popup.wrapper.appendTo=e.tgDropdownPopupAppendTo),"false"!==e.tgDropdownPopupStrictWidth&&(e.$templates.popup.wrapper.strictWidth=!0),e.$findElementInTemplate=function(e,t){return e&&e.element&&t?e.element.find(t):void 0},e.openPopup=function(){var t=e.$stateHolder.loadDefer,r=e.$stateHolder.popup;S&&!e.getSource()&&(t=e.refreshSource()),t||(t=i.when(!0)),e.$stateHolder.loader=!0,r.opened=void 0,t.then(function(){if(r.opened!==!1){if(e.$stateHolder.filter="",e.$dataHolder.filteredItems=e.getSource(),!e.$dataHolder.filteredItems||0===e.$dataHolder.filteredItems.length)return;r.opened=!0,e.$stateHolder.limit=T,e.updatePopupElement(e.$templates.popup.wrapper),e.$templates.popup.wrapper.appendTo&&!r.updateIntervalID&&(r.updateIntervalID=c(function(){r.opened&&e.updatePopupElement(e.$templates.popup.wrapper)},50))}})["finally"](function(){e.$stateHolder.loader=!1})},e.closePopup=function(){var t=e.$stateHolder.popup;t.opened=!1,e.$stateHolder.limit=T,t.updateIntervalID&&(c.cancel(t.updateIntervalID),t.updateIntervalID=void 0)},e.onPopupScrolled=function(){var t=e.$stateHolder.limit+T;t>e.$dataHolder.filteredItems.length&&(t=e.$dataHolder.filteredItems.length),T>t&&(t=T),e.$stateHolder.limit=t},e.toggleOpenState=function(t){e.tgDropdownDisabled||(e.$stateHolder.popup.opened?e.closePopup():e.openPopup()),t.preventDefault()},e.getSource=function(){return y},e.applyFilter=function(){e.$stateHolder.limit=T,e.$dataHolder.filteredItems=n("filter")(y,v({$filter:e.$stateHolder.filter}))},e.refreshSource=function(){var t=h.sourceMapper(g),r=i.when(t||!1);return e.$stateHolder.loadDefer=r,r.then(function(t){if(t){if(t.length>0&&e.tgDropdownOrderBy&&(t=n("orderBy")(t,e.tgDropdownOrderBy)),$){var r=!1;for(var a in t)if(null===p(t[a])){r=!0;break}r||t.unshift(angular.copy($))}y=t}else y=[];return y})["catch"](function(){y=[]})["finally"](function(){e.$stateHolder.loadDefer=void 0})},e.selectItem=function(t){var r=e.selectItemEventPrepare(t);u.trigger("onItemSelecting",r).then(function(){e.closePopup(),t&&(e.hasSelectedAnyItem=!0),e.$selectedItem=t,m&&(_=p(t),m.$setViewValue(_)),u.trigger("onItemSelected",r),C(g,r)})},e.selectItemEventPrepare=function(e){var t={$item:e};return t},e.updatePopupElement=function(e){var t=e.style||{};if(e.appendTo){var a=r.offset(),i=r.outerHeight(!0);t.position="absolute",t.top=a.top+i+1,t.left=a.left}e.strictWidth&&(t.width=r.innerWidth(),t.boxSizing="border-box"),e.style=t},e.updateSelectedItemFromModel=function(t,r){if(void 0===t&&null!==$&&(t=null),e.$selectedItem=null,void 0!==t&&r(e.$selectedItem)!==t)if(y){for(var a in y)if(w(r(y[a]),t)){e.$selectedItem=y[a];break}}else S&&(e.$selectedItem=l(t));return null!==e.$selectedItem?t:null},S?m&&m.$formatters.push(function(t){return e.updateSelectedItemFromModel(t,p)}):e.refreshSource()["finally"](function(){m&&(m.$formatters.push(function(t){return e.updateSelectedItemFromModel(t,p)}),e.updateSelectedItemFromModel(m.$modelValue,p))})}function u(e,t,a,i){t.append(r('<div tg-component-render-template="$templates.main.wrapper"></div>')(e));var n=!1,c=function(){n||o(function(){e.closePopup()}),n=!1};d.on("click",c),t.on("click",function(){n=!0}),e.$on("$destroy",function(){angular.forEach(e.$templates,function(e){e&&angular.forEach(e,function(e){e&&e.appendTo&&e.element&&e.element.remove()})}),d.off("click",c)})}var m=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;return{pre:p,post:u}},controller:["$scope","$element","$attrs",function(t,r,a){var i=this;i.$type="tgDropdown",i.$name=t.tgDropdownId?t.tgDropdownId:i.$type+"_"+t.$id,i.$scope=t,i.$element=r,i.$attrs=a,i.$supportEvents=!0,this.$setSelectedItemTemplate=function(e){t.$templates.main.selectedItem.setTemplate(e)},this.$setPopupHeaderTemplate=function(e){t.$templates.popup.header.setTemplate(e)},this.$setItemTemplate=function(e){t.$templates.popup.item.setTemplate(e)},this.$setPopupFooterTemplate=function(e){t.$templates.popup.footer.setTemplate(e)},this.refreshSource=function(){return t.refreshSource()},this.selectItem=function(e){t.selectItem(e)},this.$overrideFn=function(e,r){var a=t[e]||angular.noop;t[e]=function(){var e,t=this.$baseFn;return this.$baseFn=a,e=r.apply(this,arguments),this.$baseFn=t,e}},e.$addInstance(i),t.$on("$destroy",function(){e.$removeInstance(i)})}]}}function t(e){return{restrict:"A",require:"tgDropdown",scope:!1,compile:function(t,r){function a(t,r,a,i){var n,o=e.get("tgComponentRenderTemplateModel");t=i.$scope,t.$templates.popup.wrapper=new o("popup.wrapper",a.tgDropdownPopupTemplateUrl||"tg-dropdown-stage-popup.tpl.html"),t.$paths=[],t.$level=0,i.$overrideFn("openPopup",function(){if(this.$baseFn(),t.$selectedItem){var e=t.collectPaths(t.$selectedItem),r=e.length-1;r>=0?(t.$level=r+1,t.selectItem(e[r])):t.goRoot()}else t.$level=0}),i.$overrideFn("selectItem",function(e){t.hasChilds(e)?n=t.$dataHolder.filteredItems=e.childs:(t.$paths=t.collectPaths(e),this.$baseFn(e))}),i.$overrideFn("getSource",function(e){return e?this.$baseFn():n}),i.$overrideFn("selectItemEventPrepare",function(e){var r=this.$baseFn(e);return r.$paths=t.$paths,r}),i.$overrideFn("updateSelectedItemFromModel",function(e,r){if(void 0!==e&&r(t.$selectedItem)!==e){var a,i=function(n){if(Array.isArray(n))for(var o=0,c=n.length;c>o;o++){if(a=n[o],r(a)===e)return a;if(t.hasChilds(a)&&(a=i(a.childs)))return a}};t.$selectedItem=i(t.getSource(!0))||null,t.$selectedItem&&(t.$paths=t.collectPaths(t.$selectedItem))}return null!==t.$selectedItem?e:null}),t.hasChilds=function(e){return e.hasOwnProperty("childs")&&Array.isArray(e.childs)&&e.childs.length>0},t.goRoot=function(){t.$level=0,t.$dataHolder.filteredItems=t.getSource(!0)},t.goForward=function(e){t.$level=t.getItemLevel(e)+1,t.$level>=0?t.selectItem(e):t.goRoot()},t.goBack=function(e){var r=t.collectPaths(e),a=r.length-2;a>=0?(t.$level=a+1,t.selectItem(r[a])):t.goRoot()},t.collectPaths=function(e){var r=[],a=null,i=function(n){var o,c;if(Array.isArray(n))for(o=0,c=n.length;c>o;o++){if(a=n[o],a===e)return a;if(t.hasChilds(a)&&(a=i(a.childs)))return r.unshift(n[o]),a}};return i(t.getSource(!0)),r},t.getItemLevel=function(e){var r=-1,a=null,i=function(n){if(Array.isArray(n))for(var o=0,c=n.length;c>o;o++){if(a=n[o],a===e)return r++,a;if(t.hasChilds(a)&&(a=i(a.childs)))return r++,a}};return i(t.getSource(!0)),r},i.getPaths=function(){return t.$paths}}return{pre:a,post:void 0}}}}function r(e){return e.transcludeTemplate("^?tgDropdown","$setSelectedItemTemplate")}function a(e){return e.transcludeTemplate("^?tgDropdown","$setPopupHeaderTemplate")}function i(e){return e.transcludeTemplate("^?tgDropdown","$setItemTemplate")}function n(e){return e.transcludeTemplate("^?tgDropdown","$setPopupFooterTemplate")}angular.module("tg.components").run(["$templateCache",function(e){e.put("tg-dropdown.tpl.html",'<div class="btn-group tg-dropdown-wrap" ng-class="tgDropdownWrapClass">   <div class="tg-dropdown-button"        ng-class="{ \'disabled\': tgDropdownDisabled }"        ng-click="toggleOpenState($event);">       <button class="tg-dropdown-label overflow">           <span style="font-style: italic" class="muted"                 ng-if="!$selectedItem"                 ng-bind-html="tgDropdownPlaceholder"></span>           <span tg-component-render-template="$templates.main.selectedItem">No Template</span>       </button>       <div class="input-loader tg-dropdown__loader" ng-show="$stateHolder.loader"></div>       <button class="tg-dropdown-caret fa" ng-class="$stateHolder.popup.opened ? \'fa-caret-up\' : \'fa-caret-down\'"></button>   </div>   <div tg-component-render-template="$templates.popup.wrapper"></div>'),e.put("tg-dropdown-popup.tpl.html",'<div class="tg-dropdown-menu"     ng-class="{ \'tg-dropdown-menu-has-search\': !!tgDropdownSearch }"     ng-style="$templates.popup.wrapper.style"     ng-show="$stateHolder.popup.opened">   <input type="text" class="tg-dropdown-menu-search" placeholder="{{ tgDropdownSearchPlaceholder }}"        ng-model="$stateHolder.filter"        ng-change="applyFilter();">   <ul class="dropdown-menu" tg-when-scrolled="onPopupScrolled($event);">       <li tg-component-render-template="$templates.popup.header"></li>       <li ng-repeat="$item in $dataHolder.filteredItems | limitTo:$stateHolder.limit">           <a href="" ng-click="selectItem($item);" tg-component-render-template="$templates.popup.item">               No Template           </a>       </li>       <li tg-component-render-template="$templates.popup.footer"></li>   </ul></div>'),e.put("tg-dropdown-popup-footer.tpl.html",'<span ng-if="$stateHolder.filter && $dataHolder.filteredItems == 0">   <a href="" class="overflow">       No match for "{{ $stateHolder.filter }}"   </a></span>'),e.put("tg-dropdown-stage-popup.tpl.html",'<div class="tg-dropdown-menu"     ng-style="$templates.popup.wrapper.style"     ng-show="$stateHolder.popup.opened">   <ul class="tg-dropdown-stage-menu">       <li class="tg-dropdown-stage-menu__item-wrap" ng-if="$level > 0">           <button class="fa fa-caret-left tg-dropdown-stage-menu__back" ng-click="goBack($item)"></button>           <div class="tg-dropdown-stage-menu__item" ng-click="goBack($item);">Back</div>       </li>       <li class="tg-dropdown-stage-menu__item-wrap" ng-repeat="$item in $dataHolder.filteredItems">           <div class="fa fa-check tg-dropdown-stage-menu__check" style="visibility: hidden;"></div>           <button class="fa fa-caret-right tg-dropdown-stage-menu__forward"                   ng-click="goForward($item);"                   ng-if="hasChilds($item)"></button>           <div class="tg-dropdown-stage-menu__item"                ng-click="goForward($item);"                ng-class="{ \'m-selectable\': !hasChilds($item) }"                tg-component-render-template="$templates.popup.item">No Template</div>       </li>   </ul></div>')}]).directive("tgDropdown",e).directive("tgDropdownStage",t).directive("tgDropdownSelectedItemTemplate",r).directive("tgDropdownPopupHeaderTemplate",a).directive("tgDropdownItemTemplate",i).directive("tgDropdownPopupFooterTemplate",n),e.$inject=["$tgComponents","$injector","$compile","$parse","$q","$filter","$timeout","$interval","$document"],t.$inject=["$injector"],r.$inject=["tgComponentsTemplate"],a.$inject=["tgComponentsTemplate"],i.$inject=["tgComponentsTemplate"],n.$inject=["tgComponentsTemplate"]}(),function(){"use strict";function e(e){return e.replace(t,"\\$1")}var t=/([.?*+^$[\]\\(){}|-])/g;angular.module("tg.components").filter("tgHighlight",[function(){return function(t,r){if(r){var a=new RegExp(e(r),"gi");return t.replace(a,"<strong>$&</strong>")}return t}}]).directive("tgHighlightHtml",["$timeout","$compile",function(t,r){return{restrict:"A",scope:!1,compile:function(){return{pre:angular.noop,post:function(a,i,n){if(n.tgHighlightHtml){var o=e(n.tgHighlightHtml)+"(?!([^<]+)?>)",c=new RegExp(o,"gi");t(function(){i.html(function(e,t){return t=t.replace(c,"<strong>$&</strong>"),"true"===n.tgHighlightHtmlCompile?r("<span>"+t+"</span>")(a):t})})}}}}}}])}(),function(){"use strict";function e(e,t,r,a,i,n){return{restrict:"A",require:["tgTabset"],scope:{tgTabset:"=?",tgTabsetId:"@",tgTabsetTemplateUrl:"@",tgTabsetWrapClass:"@",tgTabsetActiveTab:"@",tgTabsetContext:"@"},compile:function(){function e(e,t,r,a){var i=a[0];e.$tabs=i.$tabs,e.setActiveTab=function(e,t){i.setActiveTab(e,t)},e.isActiveTab=function(e){return e&&i.getActiveTab()===e}}function n(e,n,o){var c=e.$parent,d=a(e.tgTabsetTemplateUrl)(c)||"tg-tabset.tmpl.html";t.get(d,{cache:i}).success(function(t){var a=r(t.trim())(e);n.prepend(a)})}return{pre:e,post:n
}},controller:["$scope","$element","$attrs",function(t,r,i){function o(e){for(var t in l)if(l[t].name===e)return!1;return!0}function c(e){var r=n.defer();if(e.resolve){var a=[],i=e.resolve(t);angular.forEach(i,function(e,t){var r=$injector.invoke(e);a.push(r)}),n.all(a).then(r.resolve,r.reject)}else r.resolve();return r.promise}this.$type="tgTabset",this.$name=t.tgTabsetId?t.tgTabsetId:this.$type+"_"+t.$id,this.$scope=t,this.$element=r,this.$attrs=i,this.$supportEvents=!0;var d=this,l=this.$tabs=[],s=null,p=t.tgTabsetActiveTab;this.context=a(t.tgTabsetContext)(t.$parent)||{},this.getActiveTab=function(){return s},this.setActiveTab=function(e,t){var r=n.defer();if(e&&-1!==l.indexOf(e))if(e===s&&e.initiated||e.disabled)r.reject();else{e.refreshContext(!1);var a=function(){var t={tab:e,activeTab:s};d.trigger("$onTabSelecting",t).then(function(){e.loader=!0,c(e).then(function(){e.initiated=!0})["finally"](function(){e.loader=!1}),s&&(s.keepOnDeselect||(s.$scope&&s.$scope.$destroy(),s.initiated=!1),t={tab:s},d.trigger("$onTabDeselected",t)),s=e,t={tab:s},d.trigger("$onTabSelected",t),r.resolve()})["catch"](function(){r.reject()})};if(s){var i={tab:s};d.trigger("$onTabDeselecting",i).then(function(){a()})["catch"](function(){r.reject()})}else a()}else if(t)throw r.reject(),new Error("Invalid tab.");return r.promise},this.addTab=function(e){if(!o(e.name))throw new Error("Tab with name `"+e.name+"` was already added to tabset.");var t={tab:e};d.trigger("$onTabAdding",t).then(function(){l.push(e),d.trigger("$onTabAdded",t),e.name===p&&d.setActiveTab(e)})},this.removeTab=function(e,t){function r(){var r=l.indexOf(e);r>-1&&(l.splice(r,1),t||(d.trigger("$onTabRemoved",a),e===d.getActiveTab()&&(r--,0>r&&(r=0),d.setActiveTab(d.getTabByIndex(r,!0),!0))))}if(o(e.name))throw new Error("Tab with name `"+e.name+"` doesn't exist in tabset.");if(t)r();else{var a={tab:e};d.trigger("$onTabRemoving",a).then(function(){r()})}},this.getTabByIndex=function(e,t){var r=l.length;if(e>=0||r>e)return l[e];if(t)throw new Error("Invalid tab index.");return null},this.getTabByName=function(e,t){for(var r in l)if(l[r].name===e)return l[r];if(t)throw new Error("Invalid tab name.");return null},this.setDefaultTab=function(e){p=e},this.displayNext=function(e,t){l.forEach(function(r,a){r.visible=a>=e&&t>=a})},e.$addInstance(d),t.$on("$destroy",function(){e.$removeInstance(d)})}]}}function t(e,t){return{restrict:"A",require:["tgTab","^tgTabset"],transclude:!0,scope:{},compile:function(e,t){function r(e,t,r,a,i){var n,o=a[0],c=a[1];o.template.content.$attachTo=function(t,a){var d={tab:o};c.trigger("$onTabAttaching",d).then(function(){n=t;var l=a;if("true"!==r.tgTabIsolated&&(l=e.$parent.$new(),l.$tab=o),l.$external=e.$parent,l.$tabset=c,o.$scope=l,o.template.header){var s=o.template.header.renderScope;s&&(s.$tab=o)}i(l,function(e){t.append(e)}),c.trigger("$onTabAttached",d)})},o.refresh=function(){if(o.initiated&&n){var e={tab:o};c.trigger("$onTabRefreshing",e).then(function(){o.$scope.$destroy(),n.html(null),o.template.content.$attachTo(n),c.trigger("$onTabRefreshed",e)})}},o.reload=function(){c.setActiveTab(o)},o.refreshContext(),c.addTab(o),r.$observe("tgTabTitle",function(e){o.title=e}),e.$on("$destroy",function(){c.removeTab(o,!0)})}function a(e,t,r){t.remove()}return{pre:r,post:a}},controller:["$scope","$element","$attrs",function(r,a,i){var n=e(i.tgTabContext);this.name=t(i.tgTab||"tgTab_"+r.$id)(r.$parent),this.title=i.tgTabTitle||void 0,this.template={header:{templateUrl:i.tgTabTemplateUrl,renderScope:r.$parent.$new()},content:{renderScope:null}},this.$scope=null,this.context=null,this.resolve=null,i.tgTabResolve&&(this.resolve=e(i.tgTabResolve)),this.loader=!1,this.visible=!0,this.initiated="true"===i.tgTabInitiated,this.disabled="true"===i.tgTabDisabled,this.keepOnDeselect="true"===i.tgTabKeepOnDeselect,this.show=function(){this.visible=!0},this.hide=function(){this.visible=!1},this.refreshContext=function(e){var t=n(r.$parent)||{};e===!1&&(t=angular.extend(t,this.context)),this.context=t}}]}}angular.module("tg.components").run(["$templateCache",function(e){e.put("tg-tabset.tmpl.html",'<div class="tabbable"                       ng-class="tgTabsetWrapClass">                   <ul class="nav nav-tabs">                       <li ng-repeat="$tab in $tabs"                            ng-show="$tab.visible"                            ng-class="{ \'active\': isActiveTab($tab), \'disabled\': $tab.disabled }">                           <a href="" ng-click="setActiveTab($tab);">                               <span tg-tabset-render-template="$tab.template.header">{{ $tab.title || \'&nbsp;\' }}</span>                           </a>                       </li>                   </ul>                   <div class="tab-content" ng-repeat="$tab in $tabs">                       <div class="tab-pane"                              data-ng-show="$tab.visible"                              data-ng-class="{ \'active\': isActiveTab($tab) }">                             <div class="loader"                                   data-ng-show="$tab.loader"></div>                             <div data-ng-show="!$tab.loader && !$tab.initiated">Seems like some dependencies load failed! Click <a href="" ng-click="$tab.reload();">Refresh</a></div>                             <div data-ng-show="!$tab.loader"                                   data-ng-if="$tab.initiated"                                   data-tg-tabset-render-template="$tab.template.content"></div>                        </div>                   </div>                </div>')}]).directive("tgTabset",e).directive("tgTab",t).directive("tgTabsetRenderTemplate",["$http","$compile","$parse","$templateCache",function(e,t,r,a){return{restrict:"A",scope:!1,compile:function(){function i(i,n,o){var c=r(o.tgTabsetRenderTemplate)(i);c&&angular.isObject(c)&&(c.templateUrl?(n.html(null),c.renderScope||(c.renderScope=i),e.get(c.templateUrl,{cache:a}).success(function(e){var r=t(e.trim());n.append(r(c.renderScope))})):c.hasOwnProperty("$attachTo")&&(n.html(null),c.renderScope=i,c.$attachTo(n,i,null)))}return{pre:null,post:i}}}}]),e.$inject=["$tgComponents","$http","$compile","$parse","$templateCache","$q"],t.$inject=["$parse","$interpolate"]}(),function(){"use strict";function e(e){var t=e.get("tgUtilities");return function(e,r){return r?(r=r.toLowerCase(),t.select(e,function(e){return e.name&&-1!==e.name.toLowerCase().indexOf(r)?e:void 0})):e}}function t(e){function t(e){var t={all:{},worldwide:void 0,clusters:[],regions:[],countries:[]};return e&&(l.empty(e.worldwide)||(t.worldwide=l.each(e.worldwide,function(e){return e.active?new s(e):void 0}),t.all[t.worldwide.id]=t.worldwide),l.empty(e.clusters)||(l.forEach(e.clusters,function(e){if(e.active){var r=new p(e);t.clusters.push(r),t.all[r.id]=r}}),l.sort(t.clusters,function(e,t){return d.indexOf(e.id)-d.indexOf(t.id)})),l.empty(e.quickpicks)||(l.forEach(e.quickpicks,function(e){if(e.active){var r=l.each(t.clusters,function(t){var r=l.each(e.territory_ids,function(e){return-1===t.raw.territory_ids.indexOf(e)?!0:void 0});return r?void 0:t}),a=new u(e);a.setCluster(r),t.regions.push(a),t.all[a.id]=a,r&&r.addRegion(a)}}),l.sort(t.regions,function(e,t){return e.name>t.name?1:e.name<t.name?-1:0}),l.forEach(t.clusters,function(e){l.sort(e.regions,function(e,t){return e.name>t.name?1:e.name<t.name?-1:0})})),l.empty(e.countries)||(l.forEach(e.countries,function(e){if(e.active){var r=l.each(t.clusters,function(t){return-1!==t.raw.territory_ids.indexOf(e.id)?t:void 0}),a=l.select(t.regions,function(t){return-1!==t.raw.territory_ids.indexOf(e.id)?t:void 0}),i=new m(e);i.setCluster(r),t.countries.push(i),t.all[i.id]=i,r&&r.addCountry(i),l.empty(a)||l.forEach(a,function(e){e.addCountry(i),i.addRegion(e)}),t.worldwide&&-1!==t.worldwide.raw.territory_ids.indexOf(e.id)&&t.worldwide.addCountry(i)}}),l.sort(t.countries,function(e,t){return e.name>t.name?1:e.name<t.name?-1:0}),l.forEach(t.clusters,function(e){l.sort(e.countries,function(e,t){return e.name>t.name?1:e.name<t.name?-1:0})}))),t}function r(e,t,r){var a=[];if(!l.empty(e)&&t){if(r)l.forEach(e,function(e){if(-1===a.indexOf(e)){if(t.worldwide&&t.worldwide.id===e)return void l.forEach(t.worldwide.countries,function(e){-1===a.indexOf(e.id)&&a.push(e.id)});var r=l.each(t.clusters,function(t){return t.id===e?t:void 0});if(r)return void l.forEach(r.countries,function(e){-1===a.indexOf(e.id)&&a.push(e.id)});var i=l.each(t.regions,function(t){return t.id===e?t:void 0});if(i)return void l.forEach(i.countries,function(e){-1===a.indexOf(e.id)&&a.push(e.id)});var n=l.each(t.countries,function(t){return t.id===e?t:void 0});n&&-1===a.indexOf(e)&&a.push(e)}});else if(t.worldwide&&-1!==e.indexOf(t.worldwide.id))a.push(t.worldwide.id);else{var i=l.select(t.clusters,function(t){return-1!==e.indexOf(t.id)?t:void 0}),n=l.select(t.countries,function(t){return-1!==e.indexOf(t.id)&&-1===i.indexOf(t.cluster)?t:void 0});if(l.forEach(t.regions,function(t){-1!==e.indexOf(t.id)&&-1===i.indexOf(t.cluster)&&l.forEach(t.countries,function(e){-1===n.indexOf(e)&&n.push(e)})}),l.forEach(t.clusters,function(e){if(-1===i.indexOf(e)){var t=l.select(n,function(t){return-1!==e.countries.indexOf(t)?t:void 0});t.length===e.countries.length&&(i.push(e),n=l.select(n,function(e){return-1===t.indexOf(e)?e:void 0}))}}),i.length&&t.clusters.length===i.length&&t.worldwide)a.push(t.worldwide.id);else{l.forEach(i,function(e){a.push(e.id)});var o=t.regions.slice();l.sort(o,function(e,t){return t.countries.length-e.countries.length}),l.forEach(o,function(e){var t=l.select(n,function(t){return-1!==e.countries.indexOf(t)?t:void 0});t.length===e.countries.length&&(a.push(e.id),n=l.select(n,function(e){return-1===t.indexOf(e)?e:void 0}))}),l.select(n,function(e){a.push(e.id)})}}l.sort(a,function(e,t){return e-t})}return a}function a(e,t,r){var a=[];return!l.empty(e)&&t&&t.all&&(l.forEach(e,function(e){t.all.hasOwnProperty(e)&&a.push(t.all[e])}),r&&c(a)),a}function i(e,t){if(e=r(e,t,!0),!l.empty(e)){if(e.length===t.countries.length&&t.worldwide)return t.worldwide.name;var i=t.countries.length-e.length;if(i>0&&10>=i){var n=l.select(t.countries,function(t){return-1===e.indexOf(t.id)?t.name:void 0});return n.sort(),t.worldwide.name+" excluding "+l.naturalJoin(n,", "," and ")}var o,c,d,s=a(e,t),p={},u=[],m=[],g=[];if(l.forEach(s,function(e){var t=e.cluster;p.hasOwnProperty(t.id)||(p[t.id]={cluster:t,countries:[]}),p[t.id].countries.push(e)}),l.select(p,function(e){var t=e.cluster.countries;t.length===e.countries.length?u.push(e.cluster):m.push(e)}),o=l.select(u,function(e){return e.name}),c=l.select(m,function(e){var t=e.cluster.countries,r=t.length;if(i=r-e.countries.length,r>10&&i>0&&10>=i&&.25>=i/r){var a=l.select(t,function(t){var r=l.each(e.countries,function(e){return t.id===e.id?e:void 0});return r?void 0:t.name});return a.sort(),e.cluster.name+" excluding "+l.naturalJoin(a,", "," and ")}l.forEach(e.countries,function(e){g.push(e.id)})}),!l.empty(g)){g=r(g,t);var h=a(g,t,!0);d=l.select(h,function(e){return e.name})}var y=o.concat(c);return y.sort(),d&&(y=y.concat(d)),y.join(", ")}}function n(e,t,a){return a&&(e=r(e,a,!0),t=r(t,a,!0)),l.select(e,function(e){return-1!==t.indexOf(e)?e:void 0})}function o(e,t,a){return a&&(e=r(e,a,!0),t=r(t,a,!0)),l.select(e,function(e){return-1===t.indexOf(e)?e:void 0})}function c(e){l.sort(e,function(e,t){if(e.type===t.type)return e.name>t.name?1:e.name<t.name?-1:0;var r=0,a=0;switch(e.type){case"worldwide":r=1e6;break;case"cluster":r=1e5;break;case"region":r=1e4;break;case"country":r=1e3}switch(t.type){case"worldwide":a=1e6;break;case"cluster":a=1e5;break;case"region":a=1e4;break;case"country":a=1e3}return a-r})}var d=[10005,1e4,10004,10002,10003,10001],l=e.get("tgUtilities"),s=e.get("tgTerritoryWorldwideTerritoryModel"),p=e.get("tgTerritoryClusterTerritoryModel"),u=e.get("tgTerritoryRegionTerritoryModel"),m=e.get("tgTerritoryCountryTerritoryModel");return{prepareRawData:t,validateTerritories:r,getTerritories:a,getTerritoriesLabel:i,getTerritoriesIntersection:n,getTerritoriesComplement:o,territoriesSort:c}}function r(){function e(e){this.raw=e,this.id=e.id,this.name=e.title,this.type="worldwide",this.countries=[]}return e.prototype.addCountry=function(e){this.countries.push(e)},e}function a(){function e(e){this.raw=e,this.id=e.id,this.name=e.title,this.type="cluster",this.regions=[],this.countries=[]}return e.prototype.addRegion=function(e){this.regions.push(e)},e.prototype.addCountry=function(e){this.countries.push(e)},e}function i(){function e(e){this.raw=e,this.id=e.id,this.name=e.title,this.type="region",this.cluster=void 0,this.countries=[]}return e.prototype.setCluster=function(e){this.cluster=e},e.prototype.addCountry=function(e){this.countries.push(e)},e}function n(){function e(e){this.raw=e,this.id=e.id,this.name=e.title,this.code=e.alphanumeric_code,this.type="country",this.cluster=void 0,this.regions=[]}return e.prototype.setCluster=function(e){this.cluster=e},e.prototype.addRegion=function(e){this.regions.push(e)},e}function o(){function e(e,a,i){function n(e,n){var o=i.defer();if(n=n||"@",e&&p[n]){var c=p[n],d=s.isPromise(c)?c:i.when(c);d.then(function(e){o.resolve(e)},function(){o.reject()})}else{p[n]=o.promise;var u=r.getServiceUrl();if("@"!==n&&t){var m=t(n);m&&(u+="?"+m)}a.get(u).success(function(e){var t=l.prepareRawData(e.data);o.resolve(p[n]=t)}).error(function(){o.reject()})}return o.promise}function o(e){return p[e||"@"]}function c(e){p[e||"@"]=void 0}function d(e){return o(e).countries}var l=e.get("tgTerritoryUtilities"),s=e.get("tgUtilities"),p={};return{get:n,getLocal:o,clear:c,getAllCountries:d}}var t,r=this,a="api/territories/territories.json";this.getServiceUrl=function(){return a},this.setServiceUrl=function(e,r){a=e,t=r},this.$get=e,e.$inject=["$injector","$http","$q"]}function c(e,t,r,a){return{restrict:"A",require:["tgTerritory","?ngModel"],scope:{tgTerritory:"=?",tgTerritoryId:"@",tgTerritorySource:"=",tgTerritoryDisabled:"=?"},templateUrl:"tg-territory.tpl.html",compile:function(i,n){function o(e,t,r){var a={};return t.tgTerritoryStaticContexts?a.staticContexts=t.tgTerritoryStaticContexts:a.staticContexts=e&&e.staticContexts,t.tgTerritorySourceTypes?a.sourceTypes=f(r):a.sourceTypes=e&&e.sourceTypes,g.empty(a.sourceTypes)&&(a.sourceTypes=["COUNTRY"]),t.tgTerritoryPicker?a.picker="false"!==t.tgTerritoryPicker:a.picker=!e||e.picker!==!1,t.tgTerritoryTagsTransform?a.tagsTransform="true"===t.tgTerritoryTagsTransform:a.tagsTransform=e&&!!e.tagsTransform||!1,t.tgTerritoryPopupPosition?a.popupPosition=t.tgTerritoryPopupPosition:a.popupPosition=e&&!!e.popupPosition||"right",a.maxLines=e&&e.maxLines||3,a.maxSelectedTags=e&&e.maxSelectedTags||0,a.tagManagerTemplateUrl="tg-territory-tag-manager.tpl.html",a.tagTemplateUrl="tg-territory-tag.tpl.html",a.selectedTransform=function(e){return $(r,{$territory:e})||e},a.onSelected=function(e){v(r,{$territories:e})},t.tgTerritoryKeyField?a.keyField=function(e){return _(r,{$territory:e})||e.id||e}:a.keyField=e&&e.keyField||function(e){return e.id||e},a}function c(e,t){var r=g.select(e.countries,function(e){return e.getState().selected?e.id:void 0});return m.getTerritoriesLabel(r,t)}function d(e){var t=[],r=[];return g.forEach(e.getCountries(),function(e){var a=e.getState();a.selected?t.push(e):r.push(e)}),{selectedCountries:t,unselectedCountries:r}}function l(e){var t=[],r=[];return g.forEach(e.getCountries(),function(e){var a=e.getState();a.selected?t.push(e):r.push(e)}),{selectedCountries:t,unselectedCountries:r}}function s(e,t,r,i){function n(t){e.$stateHolder.reload=!1,e.$stateHolder.loading=!0,u.get(!t,O.staticContexts).then(function(t){e.$dataHolder.source=t,e.$dataHolder.data=s(t,O.sourceTypes),g.empty(e.$dataHolder.data.all)?e.$stateHolder.reload=!0:v(h(R)),e.$stateHolder.loading=!1})}function s(e,t){var r={all:[],worldwide:void 0,clusters:[],regions:[],countries:[]};if(g.has(t,"WORLDWIDE")&&e.worldwide){var a=angular.copy(e.worldwide),i=[],n={selected:!1},o={id:a.id,name:a.name,type:a.type,getCountries:function(){return i},getState:function(){return n},getRaw:function(){return a.raw}};r.worldwide=o,r.all.push(r.worldwide)}return g.has(t,"CLUSTER")&&(g.forEach(e.clusters,function(e){var t=[],a=[],i={selected:!1,expanded:!1,selectedCountries:0},n={id:e.id,name:e.name,type:e.type,getRegions:function(){return t},getCountries:function(){return a},getState:function(){return i},getRaw:function(){return e.raw}};r.clusters.push(n)}),Array.prototype.push.apply(r.all,r.clusters)),g.has(t,"REGION")&&(g.forEach(e.regions,function(e){var t=e.cluster&&g.each(r.clusters,function(t){return e.cluster.id===t.id?t:void 0}),a=[],i={selected:!1},n={id:e.id,name:e.name,type:e.type,getCluster:function(){return t},getCountries:function(){return a},getState:function(){return i},getRaw:function(){return e.raw}};r.regions.push(n),t&&t.getRegions().push(n)}),Array.prototype.push.apply(r.all,r.regions)),g.has(t,"COUNTRY")&&(g.forEach(e.countries,function(e){var t=e.cluster&&g.each(r.clusters,function(t){return e.cluster.id===t.id?t:void 0}),a=g.select(e.regions,function(e){return g.each(r.regions,function(t){return e.id===t.id?t:void 0})}),i={selected:!1},n={id:e.id,name:e.name,code:e.code,type:e.type,getCluster:function(){return t},getRegions:function(){return a},getState:function(){return i},getRaw:function(){return e.raw}};r.countries.push(n),r.worldwide&&r.worldwide.getCountries().push(n),t&&t.getCountries().push(n),a.length&&g.forEach(a,function(e){e.getCountries().push(n)})}),Array.prototype.push.apply(r.all,r.countries)),r}function p(t,r,a){switch(t.type){case"worldwide":e.$toggleWorldwide(r);break;case"cluster":e.$toggleClusterSelection(t,r);break;case"region":e.$toggleRegionSelection(t.getCluster(),t,r);break;case"country":e.$toggleCountrySelection(t.getCluster(),t,!a,r)}}function f(){e.$stateHolder.territoriesLabel=c(e.$dataHolder.data,e.$dataHolder.source)}function _(e){var t=e.getState();t.selected=g.empty(d(e).unselectedCountries),$(e),f()}function $(e){g.forEach(e.getRegions(),function(e){var t=e.getState();t.selected=g.empty(l(e).unselectedCountries)})}function v(t){var r=g.isArray(t)?t.slice():[];e.$dataHolder.internalModel=[],e.$dataHolder.externalModel=g.isArray(t)?t:[];var a=[];g.empty(r)||(a=g.select(r,function(e){return parseInt(O.keyField(e))||void 0})),S(a,!0,r),y(R,e.$dataHolder.externalModel)}function T(){if(e.$dataHolder.internalModel.length=0,e.$dataHolder.externalModel.length=0,e.$dataHolder.data){var t=g.select(e.$dataHolder.data.countries,function(e){return e.getState().selected?e.id:void 0}),r=S(t,!1,null);g.empty(t)||O.onSelected(r),N.$setDirty()}}function C(e,t){e.length&&g.forEach(t,function(t){var r=parseInt(O.keyField(t))||void 0;r&&g.each(e,function(e){return e.id===r?(e.hasOwnProperty("getPristine")||(e.getPristine=function(){return t}),e):void 0})})}function S(t,r,a){e.$dataHolder.internalModel.length=0,e.$dataHolder.externalModel.length=0;var i;g.empty(t)||(t=m.validateTerritories(t,e.$dataHolder.source),i=U(t,e.$dataHolder.data,!0),i.length&&(a&&C(i,a),g.forEach(i,function(t){e.$dataHolder.internalModel.push(t),e.$dataHolder.externalModel.push(O.selectedTransform(t))}))),r&&w();var n={territories:i};return M.trigger("onTerritoriesApply",n),i}function w(){e.$dataHolder.data&&(g.forEach(e.$dataHolder.data.all,function(e){e.getState().selected=!1,"cluster"===e.type&&(e.getState().selectedCountries=0)}),g.forEach(e.$dataHolder.internalModel,function(e){p(e,!0,!0)}),f(),e.$stateHolder.popup.dirty=!1)}function x(){var e=t.find(".tg-territory__input").controller("tgTypeahead");return e}function U(e,t,r){var a=[];return!g.empty(e)&&t&&t.all&&(g.forEach(t.all,function(t){-1!==e.indexOf(t.id)&&a.push(t)}),r&&m.territoriesSort(a)),a}function b(e,t){var r=e.length;if(r!=t.length)return!1;for(;r--;)if(e[r]!==t[r])return!1;return!0}var R=e.$parent,O=o(e.tgTerritory,r,R),M=i[0],N=i[1];e.$dataHolder={options:O,source:void 0,data:void 0,internalModel:[],externalModel:[]},e.$stateHolder={loading:!0,reload:!1,disabled:!1,popup:{isOpen:!1,dirty:!1,position:O.popupPosition},territoriesLabel:void 0},e.$isDisabled=function(){return e.$stateHolder.loading||!!e.tgTerritoryDisabled||e.$stateHolder.disabled},e.$isRequired=function(){return!!r.required},e.$isVisibleGlobeButton=function(){return O.picker},e.$isAllExpanded=function(){var t=e.$dataHolder.data;return!g.each(t.clusters,function(e){return e.getState().expanded?void 0:!0})},e.$isAllSelected=function(){var t=e.$dataHolder.data;return!g.each(t.countries,function(e){return e.getState().selected?void 0:!0})},e.$isTerritoriesGroup=function(e){return"worldwide"===e.type||"cluster"===e.type||"region"===e.type},e.$territoriesComparator=function(e,t){return e.id===t.id},e.$openPopup=function(){e.$stateHolder.loading||(e.$stateHolder.reload?(e.$stateHolder.reload=!1,e.$stateHolder.loading=!0,a(function(){n(!0)},1e3)):e.$dataHolder.data&&!g.empty(e.$dataHolder.data.clusters)&&(e.$stateHolder.popup.isOpen=!e.$stateHolder.popup.isOpen))},e.$closePopup=function(){e.$stateHolder.popup.isOpen&&e.$onOutsideClick()},e.$toggleAllClustersExpand=function(t){var r=e.$dataHolder.data.clusters;g.forEach(r,function(e){var r=e.getState();r.expanded=void 0!==t?t:!r.expanded})},e.$toggleClusterExpand=function(e){var t=e.getState();t.expanded=!t.expanded},e.$expandClusterClass=function(e){var t=e.getState();return t.expanded?"fa-caret-down":"fa-caret-right"},e.$toggleWorldwide=function(t){g.forEach(e.$dataHolder.data.clusters,function(r){e.$toggleClusterSelection(r,t)})},e.$toggleClusterSelection=function(t,r){var a,i=d(t);a=r!==!0&&g.empty(i.unselectedCountries)?i.selectedCountries:i.unselectedCountries,g.forEach(a,function(a){e.$toggleCountrySelection(t,a,!1,r)}),_(t)},e.$toggleRegionSelection=function(t,r,a){var i=l(r);a===!0?g.forEach(i.unselectedCountries,function(r){e.$toggleCountrySelection(t,r,!1,a)}):a===!1?g.forEach(i.selectedCountries,function(r){e.$toggleCountrySelection(t,r,!1,a)}):g.empty(i.unselectedCountries)?g.forEach(i.selectedCountries,function(r){e.$toggleCountrySelection(t,r,!1,a)}):g.forEach(i.unselectedCountries,function(r){e.$toggleCountrySelection(t,r,!1,a)}),_(t)},e.$toggleCountrySelection=function(t,r,a,i){e.$stateHolder.popup.dirty=!0;var n=t.getState(),o=r.getState(),c=i===!0||i===!1?i:!o.selected;o.selected!==c&&(o.selected=c,o.selected?n.selectedCountries++:n.selectedCountries--,a&&_(t))},e.$clusterSelectionClass=function(e){var t=e.getState();return t.selectedCountries===e.getCountries().length?"fa-check-square-o":t.selectedCountries>0?"fa-minus-square-o":"fa-square-o"},e.$onTagSelected=function(e,t){if("ModelUpdate"!==t){var r=e.match.data;p(r,!0),T()}},e.$onTagDeselected=function(e,t){if("ModelUpdate"!==t){var r=e.match.data;p(r,!1),T()}},e.$onOutsideClick=function(){O.tagsTransform&&x().switchToText(),e.$stateHolder.popup.isOpen&&e.$stateHolder.popup.dirty&&(e.$stateHolder.popup.dirty=!1,T()),e.$stateHolder.popup.isOpen=!1,g.isApplyInProgress(e)||e.$digest()},e.$onInsideClick=function(){O.tagsTransform&&!e.$isDisabled()&&(x().updateTagsOrder(),x().switchToTags(),g.isApplyInProgress(e)||e.$digest())},e.$initView=function(){O.tagsTransform&&x().switchToText()};var I=R.$watch(h,function(t){t!==e.$dataHolder.externalModel&&e.$dataHolder.source&&v(t)}),P=R.$watchCollection(h,function(t){if(t===e.$dataHolder.externalModel&&e.$dataHolder.source){var r=g.select(e.$dataHolder.externalModel,function(e){return parseInt(O.keyField(e))||void 0}),a=g.select(e.$dataHolder.internalModel,function(e){return e.id});b(r,a)||S(r,!0,t)}});e.$on("$destroy",function(){I(),P()}),n(!1)}function p(e,t,a,i){var n=function(r){0===t.has(r.target).length?e.$onOutsideClick():e.$onInsideClick()};r.on("click",n),e.$on("$destroy",function(){r.off("click",n)}),e.$initView()}var u=e.get("tgTerritoryService"),m=e.get("tgTerritoryUtilities"),g=e.get("tgUtilities"),h=t(n.ngModel),y=h.assign,f=t(n.tgTerritorySourceTypes),_=t(n.tgTerritoryKeyField),$=t(n.tgTerritorySelectedTransform),v=t(n.tgTerritoryOnSelected);return{pre:s,post:p}},controller:["$scope","$element","$attrs","$interpolate",function(t,r,a,i){var n=this,o=e.get("$tgComponents");n.$type="tgTerritory",n.$name=a.tgTerritoryId?i(a.tgTerritoryId)(t.$parent):n.$type+"_"+t.$id,n.$scope=t,n.$attrs=a,n.$supportEvents=!0,n.getSource=function(){return t.$dataHolder.source},o.$addInstance(n),t.$on("$destroy",function(){o.$removeInstance(n)})}]}}function d(e,t){return{restrict:"A",scope:{tgTerritoryLabel:"="},templateUrl:"tg-territory-label.tpl.html",compile:function(r,a){function i(e,r,a){function i(e){p="Loading...",n.get(!e,g).then(function(e){s=e,l(d())})}function d(){return e.tgTerritoryLabel}function l(e){if(s){e=c.select(e,function(e){return parseInt(y(e))||void 0});var t=o.validateTerritories(e,s,!0),r=o.getTerritories(t,s,!0),a=o.validateTerritories(t,s);m=t.length,p=o.getTerritoriesLabel(a,s),u=c.select(r,function(e){return e.name}).join(", ")}}var s,p,u,m=0,g=a.tgTerritoryLabelStaticContexts||"@",h=t(a.tgTerritoryLabelKeyField),y=function(t){return h(e,{$territory:t})||t.id||t};e.$getLabel=function(){return p},e.$getCount=function(){return 1===m?"1 Country":m>1?m+" Countries":void 0},e.$getTooltip=function(){return u},e.$watch(d,function(e){i(!1)}),e.$watchCollection(d,function(e){l(e)})}var n=e.get("tgTerritoryService"),o=e.get("tgTerritoryUtilities"),c=e.get("tgUtilities");return{pre:i,post:void 0}}}}angular.module("tg.components").run(["$templateCache",function(e){e.put("tg-territory.tpl.html",'<div class="tg-territory">                    <div class="tg-territory__input-container">                        <div class="tg-territory__input"                              tg-typeahead=""                              tg-typeahead-disabled="$isDisabled()"                              tg-typeahead-tag-manager="$dataHolder.options"                              tg-typeahead-tag-selected="$onTagSelected(tag, sender);"                              tg-typeahead-tag-deselected="$onTagDeselected(tag, sender);"                              ng-model="$dataHolder.internalModel"                              ng-required="$isRequired()">                            <div tg-typeahead-data-set="territory as territory.name for territory in $dataHolder.data.all | tgTerritoryFilter:$viewValue"                                  tg-typeahead-data-set-comparator="$territoriesComparator">                                <div tg-typeahead-data-set-item="">                                    <div ng-init="$match.disabled = $match.data.getState().selected;">                                        <span tg-highlight-html="{{ $term }}">{{$match.data.name}}</span>                                        <div class="tg-territory__countries-counter" ng-if="$external.$isTerritoriesGroup($match.data)">{{$match.data.getCountries().length}} countries</div>                                    </div>                                </div>                             </div>                            <div tg-typeahead-popup-footer="">                                <div class="tg-typeahead__suggestions-footer-inner" ng-show="$dataSets[0].queried.matches == 0">Territory with name <strong>{{$term}}</strong> doesn\'t exist.</div>                            </div>                        </div>                                                <button class="tg-territory__globe-button"                                 ng-if="$isVisibleGlobeButton()"                                 ng-class="{\'tg-territory__loading-button\':$stateHolder.loading, \'tg-territory__reload-button\':$stateHolder.reload}"                                 ng-click="!$isDisabled() && $openPopup();"></button>                    </div>                    <div class="tg-territory__popup"                          ng-if="$stateHolder.popup.isOpen"                          ng-class="{ \'tg-territory__popup-left\': $stateHolder.popup.position === \'left\' }">                        <div class="tg-territory__popup-header"                              ng-show="$stateHolder.territoriesLabel">                            <div class="tg-territory__popup-header-labels">You have selected <strong>{{$stateHolder.territoriesLabel}}</strong></div>                        </div>                        <div class="tg-territory__popup-header">                            <div class="pull-left" ng-switch="$isAllExpanded()">                                <button class="tg-territory__btn" ng-switch-when="false" ng-click="$event.stopPropagation(); $toggleAllClustersExpand(true);">Expand all</button>                                <button class="tg-territory__btn" ng-switch-when="true" ng-click="$event.stopPropagation(); $toggleAllClustersExpand(false);">Collapse all</button>                            </div>                            <div class="pull-left" ng-switch="$isAllSelected()">                                <button class="tg-territory__btn" ng-switch-when="false" ng-click="$event.stopPropagation(); $toggleWorldwide(true);">Select all</button>                                <button class="tg-territory__btn" ng-switch-when="true" ng-click="$event.stopPropagation(); $toggleWorldwide(false);">Deselect all</button>                            </div>                            <button class="tg-territory__btn pull-right" ng-click="$closePopup();">Close</button>                        </div>                        <div class="tg-territory__popup-body">                            <div class="tg-territory__clusters">                                <div class="tg-territory__cluster" ng-repeat="cluster in ::$dataHolder.data.clusters track by cluster.id">                                    <div class="tg-territory__cluster-inner">                                        <div class="tg-territory__cluster-header" ng-click="$toggleClusterExpand(cluster);">                                            <span class="pull-left">                                                <i class="tg-territory__caret fa" ng-class="$expandClusterClass(cluster)"></i>                                                <div class="tg-territory__cluster-label">{{::cluster.name}}</div>                                            </span>                                            <span class="pull-right">                                                <div class="tg-territory__cluster-label">{{cluster.getState().selectedCountries}}/{{cluster.getCountries().length}}</div>                                                <i class="tg-territory__cluster-check fa" ng-class="$clusterSelectionClass(cluster)" ng-click="$event.stopPropagation(); $toggleClusterSelection(cluster);"></i>                                            </span>                                        </div>                                        <div class="tg-territory__cluster-body"                                              ng-if="cluster.getState().expanded">                                            <ul class="tg-territory__cluster-countries">                                                <li class="tg-territory__cluster-country"                                                     ng-repeat="country in ::cluster.getCountries() track by country.id"                                                     ng-click="$toggleCountrySelection(cluster, country, true);"                                                     ng-class="{\'m-active\':country.getState().selected}">                                                    {{::country.name}}                                                </li>                                            </ul>                                            <div ng-if="cluster.getRegions().length">                                                <div class="tg-territory__cluster-region-title">Regions</div>                                                <ul class="tg-territory__cluster-regions">                                                    <li class="tg-territory__cluster-region"                                                         ng-repeat="region in ::cluster.getRegions() track by region.id"                                                         ng-click="$toggleRegionSelection(cluster, region);"                                                         ng-class="{\'m-active\':region.getState().selected}">                                                        <span>{{::region.name}}</span>                                                    </li>                                                </ul>                                            </div>                                        </div>                                    </div>                                </div>                            </div>                        </div>                    </div>                </div>'),
e.put("tg-territory-tag-manager.tpl.html",'<div class="tg-typeahead__tag-manager"                       ng-class="$templates.tagManager.wrapper.class"                       ng-style="$templates.tagManager.wrapper.style"                       ng-switch="$stateHolder.tagsTransformed">                   <div ng-switch-when="false">                       <div ng-repeat="$tag in $tags track by $tag.match.model.id | orderBy:$tagsOrder"                             tg-component-render-template="$templates.tagManager.tag"></div>                   </div>                   <div class="tg-typeahead__tags-text"                         ng-switch-when="true">{{ $external.$stateHolder.territoriesLabel }}</div>                </div>'),e.put("tg-territory-tag.tpl.html",'<div class="tg-typeahead__tag tg-territory__tag tg-territory__tag-type-{{ ::$tag.match.model.type }}">                    <span class="tg-typeahead__tag-remove fa fa-times" rel="tooltip"                           tooltip-html-unsafe="delete"                           tooltip-placement="right"                           ng-class="{\'disabled\': $isDisabled()}"                           ng-click="!$isDisabled() && $removeTag($tag); $event.stopPropagation();"></span>                    <span class="tg-typeahead__tag-name"                           ng-bind-html="::$tag.match.value | tgTrustedHtml"></span>                </div>'),e.put("tg-territory-label.tpl.html",'<div class="tg-territory-label">                    <div class="tg-territory-label__list"                         ng-if="!(!!$getLabel())">                        <b>None</b>                    </div>                    <div class="tg-territory-label__list"                         ng-if="!!$getLabel()">                        <div class="tg-territory-label__list-overflow">{{ $getLabel() }}</div>                    </div>                                        <a class="tg-territory-label__counter"                         ng-if="$getCount()"                         data-tooltip="{{ $getTooltip() }}"                         data-tooltip-append-to-body="true">({{ $getCount() }})                    </a>                </div>')}]).filter("tgTerritoryFilter",e).factory("tgTerritoryUtilities",t).factory("tgTerritoryWorldwideTerritoryModel",r).factory("tgTerritoryClusterTerritoryModel",a).factory("tgTerritoryRegionTerritoryModel",i).factory("tgTerritoryCountryTerritoryModel",n).provider("tgTerritoryService",o).directive("tgTerritory",c).directive("tgTerritoryLabel",d),e.$inject=["$injector"],t.$inject=["$injector"],c.$inject=["$injector","$parse","$document","$timeout"],d.$inject=["$injector","$parse"]}(),function(){"use strict";function e(e,t,r,a,i,n,o,c){return{restrict:"A",require:["tgTypeahead","?ngModel"],scope:{tgTypeahead:"=?",tgTypeaheadId:"@",tgTypeaheadContext:"=",tgTypeaheadWrapClass:"@",tgTypeaheadDisabled:"=?",tgTypeaheadSelected:"@",tgTypeaheadDefaultTerm:"@",tgTypeaheadDefaultFilter:"@"},priority:4,compile:function(e,d){function l(e,t){var r={};return t.tgTypeaheadPlaceholder?r.placeholder=t.tgTypeaheadPlaceholder:r.placeholder=e&&e.placeholder||"",t.tgTypeaheadMinLength?r.minLength=Math.abs(parseInt(t.tgTypeaheadMinLength)):r.minLength=e&&e.minLength||0,t.tgTypeaheadDelay?r.delay=Math.abs(parseInt(t.tgTypeaheadDelay)):r.delay=e&&e.delay||500,t.tgTypeaheadPopupAppendTo?r.popupAppendTo=t.tgTypeaheadPopupAppendTo:r.popupAppendTo=e&&e.popupAppendTo||void 0,"true"===t.tgTypeaheadPopupAppendToBody&&(r.popupAppendTo="body"),t.tgTypeaheadPopupStrictWidth?r.popupStrictWidth="false"!==t.tgTypeaheadPopupStrictWidth:r.popupStrictWidth=e&&e.popupStrictWidth||!0,t.tgTypeaheadDisplayClean?r.displayClean="true"===t.tgTypeaheadDisplayClean:r.displayClean=e&&e.displayClean||!1,t.tgTypeaheadTemplateUrl?r.templateUrl=t.tgTypeaheadTemplateUrl:r.templateUrl=e&&e.templateUrl||"tg-typeahead.tpl.html",t.tgTypeaheadHeaderTemplateUrl?r.headerTemplateUrl=t.tgTypeaheadHeaderTemplateUrl:r.headerTemplateUrl=e&&e.headerTemplateUrl||void 0,t.tgTypeaheadContainerTemplateUrl?r.containerTemplateUrl=t.tgTypeaheadContainerTemplateUrl:r.containerTemplateUrl=e&&e.containerTemplateUrl||"tg-typeahead-container.tpl.html",t.tgTypeaheadFooterTemplateUrl?r.footerTemplateUrl=t.tgTypeaheadFooterTemplateUrl:r.footerTemplateUrl=e&&e.footerTemplateUrl||void 0,t.tgTypeaheadPopupTemplateUrl?r.popupTemplateUrl=t.tgTypeaheadPopupTemplateUrl:r.popupTemplateUrl=e&&e.popupTemplateUrl||"tg-typeahead-popup.tpl.html",t.tgTypeaheadPopupHeaderTemplateUrl?r.popupHeaderTemplateUrl=t.tgTypeaheadPopupHeaderTemplateUrl:r.popupHeaderTemplateUrl=e&&e.popupHeaderTemplateUrl||void 0,t.tgTypeaheadPopupFooterTemplateUrl?r.popupFooterTemplateUrl=t.tgTypeaheadPopupFooterTemplateUrl:r.popupFooterTemplateUrl=e&&e.popupFooterTemplateUrl||void 0,t.tgTypeaheadSuggestedPopupTemplateUrl?r.suggestedPopupTemplateUrl=t.tgTypeaheadSuggestedPopupTemplateUrl:r.suggestedPopupTemplateUrl=e&&e.suggestedPopupTemplateUrl||"tg-typeahead-suggested-popup.tpl.html",t.tgTypeaheadSuggestedPopupHeaderTemplateUrl?r.suggestedPopupHeaderTemplateUrl=t.tgTypeaheadSuggestedPopupHeaderTemplateUrl:r.suggestedPopupHeaderTemplateUrl=e&&e.suggestedPopupHeaderTemplateUrl||void 0,t.tgTypeaheadSuggestedPopupFooterTemplateUrl?r.suggestedPopupFooterTemplateUrl=t.tgTypeaheadSuggestedPopupFooterTemplateUrl:r.suggestedPopupFooterTemplateUrl=e&&e.suggestedPopupFooterTemplateUrl||void 0,t.tgTypeaheadDataSetsHeaderTemplateUrl?r.dataSetsHeaderTemplateUrl=t.tgTypeaheadDataSetsHeaderTemplateUrl:r.dataSetsHeaderTemplateUrl=e&&e.dataSetsHeaderTemplateUrl||void 0,t.tgTypeaheadDataSetsItemTemplateUrl?r.dataSetsItemTemplateUrl=t.tgTypeaheadDataSetsItemTemplateUrl:r.dataSetsItemTemplateUrl=e&&e.dataSetsItemTemplateUrl||"tg-typeahead-dataSet-item.tpl.html",t.tgTypeaheadDataSetsFooterTemplateUrl?r.dataSetsFooterTemplateUrl=t.tgTypeaheadDataSetsFooterTemplateUrl:r.dataSetsFooterTemplateUrl=e&&e.dataSetsFooterTemplateUrl||void 0,r}function s(e,t,r,c){function d(t){var r=e.$dataHolder.collectedPromises,a=e.$promisesHolder.regularCancelPromise;return a&&r.push(a.promise),_.forEach(e.$dataSets,function(n){n.data={};var o={$queried:!0,$viewValue:t,$internal:e,$context:angular.extend({dataSet:n},e.$prepareSourceContext()||{})},c=i.defer(),d=n.queried,l=d.source.sourceMapper,s=l(U,o),p=_.isPromise(s)?s:i.when(s);d.inProgress=!0,p.then(function(r){if(e.$term===t){d.matches.length=0,d.$hideMore();var a=r;_.forEach(a,function(t){var r=d.$getItem(t,U),a=new y(t,r.model,r.value);e.$prepareMatchModel(a,n),d.matches.push(a)})}c.resolve(r)},function(){c.resolve([])})["finally"](function(){a&&a.resolve()}),r.push(c.promise)}),r}function s(){var t=e.$dataHolder.collectedPromises,r=e.$promisesHolder.suggestedCancelPromise;return r&&t.push(r.promise),_.forEach(e.$dataSets,function(a){if(a.suggested&&a.suggested.source){a.data={};var n={$suggested:!0,$internal:e,$context:angular.extend({dataSet:a},e.$prepareSourceContext()||{})},o=a.suggested,c=o.source.sourceMapper,d=c(U,n),l=_.isPromise(d)?d:i.when(d);l.then(function(t){o.matches.length=0,o.$hideMore();var r=t;_.forEach(r,function(t){var r=o.$getItem(t,U),i=new f(t,r.model,r.value);e.$prepareMatchModel(i,a),o.matches.push(i)})})["finally"](function(){r&&r.resolve()}),t.push(l)}}),t}function p(){e.$dataHolder.collectedPromises.length=0}function $(){var t,r=e.$stateHolder.popup.opened,a=e.$stateHolder.suggestedPopup.opened;if(r?t=e.$templates.popup.wrapper:a&&(t=e.$templates.suggestedPopup.wrapper),t){var i=e.$findElementInTemplate(t,".tg-typeahead__suggestions-container"),n=i.get(0);if(n&&n.clientHeight<n.scrollHeight){var o=e.$findElementInTemplate(t,".tg-typeahead__suggestions-group-item.active"),c=o.get(0);if(c){var d=n.getBoundingClientRect(),l=c.getBoundingClientRect();l.top<d.top?n.scrollTop+=l.top-d.top:l.bottom>d.bottom&&(n.scrollTop+=l.bottom-d.bottom)}}}}function v(t){t.on("mouseenter mouseleave mousedown",".tg-typeahead__suggestions-group-item",function(t){if(t.target){var r=angular.element(t.target).scope();switch(t.type){case"mouseenter":e.$setActiveMatch(r.$dataSet,r.$index),r.$digest();break;case"mouseleave":var a=e.getDataSetSource(r.$dataSet);a&&(a.activeIndex=-1),r.$digest();break;case"mousedown":r.$match.disabled||e.$selectMatch(r.$dataSet,r.$index,r.$match,t),r.$apply()}}})}function T(e){e.off("mouseenter mouseleave mousedown",".tg-typeahead__suggestions-group-item")}function C(e){switch(b.trigger("onTemplateInit",{template:e}),e.name){case"main.container":w(e);break;case"popup.wrapper":case"suggestedPopup.wrapper":v(e.element)}}function S(e){switch(b.trigger("onTemplateDestroy",{template:e}),e.name){case"popup.wrapper":case"suggestedPopup.wrapper":T(e.element)}}function w(t){var r=e.$findElementInTemplate(e.$templates.main.wrapper,".tg-typeahead__input");if(r){r.on("click",function(){var t=e.$stateHolder.popup.opened;e.$closePopup(),e.$stateHolder.hasSuggestions&&!t&&e.$resolveSuggestedSources()});var a=r.controller("ngModel");a.$parsers.unshift(function(t){return t=t||"",x&&n.cancel(x),e.$closePopup(),e.$applyMatch(null,null),t.length>=O.minLength&&(x=n(function(){e.$term&&e.$resolveSources(t)},O.delay)),t})}}var x,U=e.$external=e.$parent,b=c[0],R=c[1],O=l(e.tgTypeahead,r);e.selectedDataSet=null,e.$dataSets=[],e.$templates={main:{wrapper:new h("main.wrapper",O.templateUrl,C),header:new h("main.header",O.headerTemplateUrl,C),container:new h("main.container",O.containerTemplateUrl,C),footer:new h("main.footer",O.footerTemplateUrl,C)},popup:{wrapper:new h("popup.wrapper",O.popupTemplateUrl,C,S),header:new h("popup.header",O.popupHeaderTemplateUrl,C),container:new h("popup.container",void 0,C),footer:new h("popup.footer",O.popupFooterTemplateUrl,C)},suggestedPopup:{wrapper:new h("suggestedPopup.wrapper",O.suggestedPopupTemplateUrl,C,S),header:new h("suggestedPopup.header",O.suggestedPopupHeaderTemplateUrl,C),container:new h("suggestedPopup.container",void 0,C),footer:new h("suggestedPopup.footer",O.suggestedPopupFooterTemplateUrl,C)},dataSet:{header:new h("dataSet.header",O.dataSetsHeaderTemplateUrl,C),item:new h("dataSet.item",O.dataSetsItemTemplateUrl,C),footer:new h("dataSet.footer",O.dataSetsFooterTemplateUrl,C)}},O.popupAppendTo&&(e.$templates.popup.wrapper.appendTo=O.popupAppendTo,e.$templates.suggestedPopup.wrapper.appendTo=O.popupAppendTo),e.setDefaultTerm=function(t){e.$dataHolder.defaultTerm=t},O.popupStrictWidth&&(e.$templates.popup.wrapper.strictWidth=!0,e.$templates.suggestedPopup.wrapper.strictWidth=!0),e.$stateHolder={loader:!1,disabled:!1,popup:{opened:!1,updateIntervalID:void 0},hasSuggestions:!1,suggestedPopup:{opened:!1,updateIntervalID:void 0}},e.$dataHolder={collectedPromises:[],modelValue:null,defaultTerm:r.tgTypeaheadDefaultTerm||null},e.$eventHolder={onMatchSelected:a(e.tgTypeaheadSelected)},e.$promisesHolder={regularCancelPromise:void 0,suggestedCancelPromise:void 0},r.$observe("tgTypeaheadDefaultTerm",function(t){e.setDefaultTerm(t),e.$clearTypeahead()}),e.$term=e.$dataHolder.defaultTerm,e.getDataSetSource=function(t){if(t){if(e.$stateHolder.popup.opened)return t.queried;if(e.$stateHolder.suggestedPopup.opened)return t.suggested}},e.selectDataSet=function(t,r){var a;_.forEach(e.$dataSets,function(r){a=e.getDataSetSource(r),a&&(a.$hideMore(),a.active=!t)}),e.selectedDataSet=t,e.selectedDataSet&&(a=e.getDataSetSource(e.selectedDataSet),a&&(a.$showMore(),a.active=!0));var i=e.$findElementInTemplate(e.$templates.main.wrapper,".tg-typeahead__suggestions-container");i&&i.scrollTop(),r&&r.stopPropagation()},e.refreshModel=function(t){return e.$clear(),t=e.$prepareModel(t),e.$setModel(t,!0),t},e.setDefaultTerm=function(t){e.$dataHolder.defaultTerm=t},e.$findElementInTemplate=function(e,t){return e&&e.element&&t?e.element.find(t):void 0},e.$openPopup=function(){var t=e.$stateHolder.popup;t.opened||(e.$stateHolder.suggestedPopup.opened=!1,t.opened=!0,e.selectDataSet(null),e.$setActiveMatch(null,-1),e.$updatePopupElement(e.$templates.popup.wrapper),e.$templates.popup.wrapper.appendTo&&!t.updateIntervalID&&(t.updateIntervalID=o(function(){t.opened&&e.$updatePopupElement(e.$templates.popup.wrapper)},200)))},e.$openSuggestedPopup=function(){var t=e.$stateHolder.suggestedPopup;t.opened||(t.opened=!0,e.selectDataSet(null),e.$setActiveMatch(null,-1),e.$updatePopupElement(e.$templates.suggestedPopup.wrapper),e.$templates.suggestedPopup.wrapper.appendTo&&!t.updateIntervalID&&(t.updateIntervalID=o(function(){t.opened&&e.$updatePopupElement(e.$templates.suggestedPopup.wrapper)},200)))},e.$closePopup=function(){if(e.$stateHolder.popup.opened){var t=e.$stateHolder.popup;t.opened=!1,t.updateIntervalID&&(o.cancel(t.updateIntervalID),t.updateIntervalID=void 0)}if(e.$stateHolder.suggestedPopup.opened){var t=e.$stateHolder.suggestedPopup;t.opened=!1,t.updateIntervalID&&(o.cancel(t.updateIntervalID),t.updateIntervalID=void 0)}e.$cancelAllRequests()},e.$updatePopupElement=function(e){var r=e.style||{};if(e.appendTo){var a=t.offset(),i=t.outerHeight(!0);r.position="absolute",r.top=a.top+i+1,r.left=a.left}e.strictWidth&&(r.width=t.innerWidth(),r.boxSizing="border-box"),e.style=r},e.$isDisabled=function(){return!!e.tgTypeaheadDisabled||e.$stateHolder.disabled},e.$isVisibleInput=function(){return!0},e.$isFocusedInput=function(){var t=e.$findElementInTemplate(e.$templates.main.wrapper,".tg-typeahead__input");return t&&t.is(":focus")},e.$setInputFocus=function(){var t=e.$findElementInTemplate(e.$templates.main.wrapper,".tg-typeahead__input");t&&t.focus()},e.$getPlaceholder=function(){return O.placeholder||""},e.$isVisibleClear=function(){return O.displayClean&&e.$term},e.$clear=function(t){e.$clearTypeahead()},e.$updateInputElement=function(){},e.$prepareSourceContext=function(){},e.$resolveSources=function(t){e.$cancelAllRequests(),e.$stateHolder.loader=!0,e.$promisesHolder.regularCancelPromise=i.defer(),i.all(d(t)).then(function(){e.$dataHolder.collectedPromises.length>0&&(p(),e.$openPopup())},function(){e.$cancelAllRequests()})["finally"](function(){e.$stateHolder.loader=!1})},e.$resolveSuggestedSources=function(){e.$cancelAllRequests(),e.$stateHolder.loader=!0,e.$promisesHolder.suggestedCancelPromise=i.defer(),i.all(s()).then(function(){e.$dataHolder.collectedPromises.length>0&&(p(),n(function(){e.$openSuggestedPopup()}))},function(){e.$cancelAllRequests()})["finally"](function(){e.$stateHolder.loader=!1})},e.$cancelAllRequests=function(){e.$stateHolder.loader=!1;var t=e.$promisesHolder.regularCancelPromise,r=e.$promisesHolder.suggestedCancelPromise;t&&(t.reject(),e.$promisesHolder.regularCancelPromise=void 0),r&&(r.reject(),e.$promisesHolder.suggestedCancelPromise=void 0);var a=e.$dataHolder.collectedPromises;a.length>0&&(_.forEach(a,function(e){e.hasOwnProperty("cancelRequest")&&e.cancelRequest()}),p()),_.forEach(e.$dataSets,function(e){e.queried.inProgress=!1,e.suggested&&(e.suggested.inProgress=!1)})},e.$clearTypeahead=function(){e.$term=e.$dataHolder.defaultTerm},e.$setActiveMatch=function(t,r){var a;_.forEach(e.$dataSets,function(i){a=e.getDataSetSource(i),a&&(a.activeIndex=i===t?r:-1)})},e.$selectMatch=function(t,r,a,i){var n={context:e.tgTypeaheadContext,dataSet:t,index:r,match:a,$internal:e};b.trigger("onMatchSelecting",n).then(function(){e.$term=n.match.value,e.$applyMatch(t,n.match.model),b.trigger("onMatchSelected",n),e.$eventHolder.onMatchSelected(U,n)}),e.$closePopup()},e.$selectUnknownMatch=function(t,r,a){e.$selectMatch(t,-1,r,a)},e.$applyMatch=function(t,r){var a=r;e.$dataSets.length>1&&(a=e.$getModel()||{},_.forEach(e.$dataSets,function(e){a[e.name]=e===t?r:null})),e.$setModel(a)},e.$prepareDefaultModel=function(){var t=e.$dataSets.length>1,r=null;return t&&(r={},_.forEach(e.$dataSets,function(e){r[e.name]=null})),r},e.$prepareModel=function(t){if(void 0===t)return e.$prepareDefaultModel();var r,a=1===e.$dataSets.length,i=e.$dataSets.length>1;if(a?r=e.$dataSets[0]:i&&(t&&!_.isArray(t)&&_.isObject(t)||(t={}),_.forEach(e.$dataSets,function(e){t.hasOwnProperty(e.name)||(t[e.name]=null),null!==t[e.name]&&void 0!==t[e.name]&&(r=e)})),r){var n=a?t:t[r.name];e.$term=r.queried.$getItem(n,e.$parent).value}return t},e.$prepareMatchModel=function(e,t){},e.$getModel=function(){return m?m(U):void 0},e.$setModel=function(t,r){e.$dataHolder.modelValue=t,!r&&R&&e.$setModelDirty(),g&&g(U,t)},e.$setModelDirty=function(){R.$setDirty?R.$setDirty(!0):R.$setViewValue(R.$viewValue)},e.$waitTill=function(t){t&&t.hasOwnProperty("finally")&&(e.$closePopup(),e.$stateHolder.loader=!0,e.$stateHolder.disabled=!0,t["finally"](function(){e.$stateHolder.loader=!1,e.$stateHolder.disabled=!1}))},e.$onPopupScrolled=function(t){if(e.selectedDataSet){var r=e.getDataSetSource(e.selectedDataSet);r&&r.$showMore()}},e.$onOutsideClick=function(){null===e.$dataHolder.modelValue&&e.$clearTypeahead(),e.$closePopup()},e.$onKeyDown=function(t){var r=e.$stateHolder.popup.opened,a=e.$stateHolder.suggestedPopup.opened;if((r||a)&&-1!==u.indexOf(t.which)){var i,o,c,d;if(e.selectedDataSet?i=e.selectedDataSet:(_.forEach(e.$dataSets,function(t){d=e.getDataSetSource(t),d&&-1!==d.activeIndex?i=t:i?i&&!c&&(c=t):o=t}),i||(i=e.$dataSets[0])),t.preventDefault(),d=e.getDataSetSource(i))if(40===t.which){var l=Math.min(d.limit,d.matches.length);if(d.activeIndex+1<l)d.activeIndex++;else{if(!c)return;e.$setActiveMatch(c,0)}n($),e.$digest()}else if(38===t.which){if(d.activeIndex>0)d.activeIndex--;else{if(!o)return;if(d=e.getDataSetSource(o)){var l=Math.min(d.limit,d.matches.length);e.$setActiveMatch(o,l-1)}}n($),e.$digest()}else if(13===t.which||32===t.which){if(i&&-1!==d.activeIndex){var s=d.matches[d.activeIndex];s.disabled||(e.$selectMatch(i,d.activeIndex,d.matches[d.activeIndex],t),e.$apply())}}else 27===t.which&&(e.$clearTypeahead(),e.$closePopup(),e.$digest())}},e.$watchModel=function(){e.$watch(e.$getModel,function(t){t!==e.$dataHolder.modelValue&&e.refreshModel(t)})},e.$trigger=b.trigger.bind(b)}function p(e,t,a,i){t.append(r('<div tg-component-render-template="$templates.main.wrapper"></div>')(e));var n=function(r){if(0===t.has(r.target).length){var a=e.$templates.popup.wrapper.element,i=e.$templates.suggestedPopup.wrapper.element;(a&&0===a.has(r.target).length||i&&0===i.has(r.target).length)&&(e.$onOutsideClick(),e.$digest())}},o=function(t){e.$onKeyDown(t)};c.on("click",n),c.on("keydown",o),e.$on("$destroy",function(){e.$onOutsideClick(),_.forEach(e.$templates,function(e){e&&_.forEach(e,function(e){e&&e.appendTo&&e.element&&e.element.remove()})}),c.off("click",n),c.off("keydown",o)}),e.$watchModel()}var u=[9,13,27,32,38,40],m=a(d.ngModel),g=m.assign,h=t.get("tgComponentRenderTemplateModel"),y=t.get("tgTypeaheadMatchModel"),f=t.get("tgTypeaheadSuggestedMatchModel"),_=t.get("tgUtilities");return{pre:s,post:p}},controller:["$scope","$element","$attrs",function(t,r,a){var i=this;i.$type="tgTypeahead",i.$name=t.tgTypeaheadId?t.tgTypeaheadId:i.$type+"_"+t.$id,i.$scope=t,i.$element=r,i.$attrs=a,i.$supportEvents=!0,this.$setHeaderTemplate=function(e){t.$templates.main.header.setTemplate(e)},this.$setFooterTemplate=function(e){t.$templates.main.footer.setTemplate(e)},this.$setPopupHeaderTemplate=function(e){t.$templates.popup.header.setTemplate(e)},this.$setPopupFooterTemplate=function(e){t.$templates.popup.footer.setTemplate(e)},this.$setSuggestedPopupHeaderTemplate=function(e){t.$templates.suggestedPopup.header.setTemplate(e)},this.$setSuggestedPopupFooterTemplate=function(e){t.$templates.suggestedPopup.footer.setTemplate(e)},this.$addDataSet=function(e){t.$dataSets.push(e),e.suggested&&(t.$stateHolder.hasSuggestions=!0)},this.$overrideFn=function(e,r){var a=t[e]||angular.noop;t[e]=function(){var e,t=this.$baseFn;return this.$baseFn=a,e=r.apply(this,arguments),this.$baseFn=t,e}},this.clear=function(){t.$clearTypeahead()},this.refreshModel=function(e){t.refreshModel(e)},this.getContext=function(){return t.tgTypeaheadContext},this.getDataSets=function(){return t.$dataSets},this.setDefaultTerm=function(e){t.setDefaultTerm(e)},e.$addInstance(i),t.$on("$destroy",function(){e.$removeInstance(i)})}]}}function t(e,t){return{restrict:"A",require:"^tgTypeahead",scope:{tgTypeaheadDataSet:"@",tgTypeaheadDataSetName:"@",tgTypeaheadDataSetLimitStep:"@",tgTypeaheadDataSetDisplayedItems:"@",tgTypeaheadDataSetSuggested:"@",tgTypeaheadDataSetComparator:"&"},compile:function(r,a){function i(e){var r=e.match(c);if(!r)throw new Error("Expected typeahead specification in form of '_modelValue_ (as _label_)? for _item_ in _collection_' but got '"+e+"'.");return{expression:e,itemName:r[3],sourceMapper:t(r[4]),viewMapper:t(r[2]||r[1]),modelMapper:t(r[1])}}function n(r,a,n,o){var c=parseInt(r.tgTypeaheadDataSetLimitStep)||9999,l=parseInt(r.tgTypeaheadDataSetDisplayedItems)||c,s=i(r.tgTypeaheadDataSet),p=e.get("tgTypeaheadDataSetModel"),u=e.get("tgComponentRenderTemplateModel"),m=e.get("tgTypeaheadSourceModel"),g=r.tgTypeaheadDataSetName||"dataSet_"+r.$id;if(r.$dataSet=new p(g),r.$dataSet.templates={header:new u("dataSet.header",n.tgTypeaheadDataSetHeaderTemplateUrl),item:new u("dataSet.item",n.tgTypeaheadDataSetItemTemplateUrl),footer:new u("dataSet.footer",n.tgTypeaheadDataSetFooterTemplateUrl)},r.$dataSet.queried=new m(s,l,c),r.tgTypeaheadDataSetSuggested){var h={itemName:s.itemName,sourceMapper:t(r.tgTypeaheadDataSetSuggested),viewMapper:s.viewMapper,modelMapper:s.modelMapper};r.$dataSet.suggested=new m(h,l,c)}var y=r.tgTypeaheadDataSetComparator();d.isFunction(y)&&(r.$dataSet.comparator=y),o.$addDataSet(r.$dataSet)}function o(e,t,r,a){e.$destroy(),t.remove()}var c=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/,d=e.get("tgUtilities");return{pre:n,post:o}},controller:["$scope",function(e){this.$setHeaderTemplate=function(t){e.$dataSet.templates.header.setTemplate(t)},this.$setItemTemplate=function(t){e.$dataSet.templates.item.setTemplate(t)},this.$setFooterTemplate=function(t){e.$dataSet.templates.footer.setTemplate(t)}}]}}function r(e,t,r,a){return{restrict:"A",require:["tgTypeahead","?ngModel"],scope:!1,priority:3,compile:function(i,n){function o(e,r,a){var i={};return a.tgTypeaheadAllowDuplicates?i.allowDuplicates="true"===a.tgTypeaheadAllowDuplicates:i.allowDuplicates=e&&e.allowDuplicates||!1,a.tgTypeaheadPostponedSelection?i.postponedSelection="true"===a.tgTypeaheadPostponedSelection:i.postponedSelection=e&&e.postponedSelection||!1,a.tgTypeaheadTagOrderBy?i.orderBy=t(a.tgTypeaheadTagOrderBy)(r):i.orderBy=e&&e.orderBy||void 0,a.tgTypeaheadTagAscendingOrder?i.ascendingOrder="true"===a.tgTypeaheadTagAscendingOrder:i.ascendingOrder=e&&e.ascendingOrder||!1,a.tgTypeaheadMaxLines?i.maxLines=Math.abs(parseInt(a.tgTypeaheadMaxLines)):i.maxLines=e&&e.maxLines||0,a.tgTypeaheadMaxSelectedTags?i.maxSelectedTags=Math.abs(parseInt(a.tgTypeaheadMaxSelectedTags)):i.maxSelectedTags=e&&e.maxSelectedTags||0,a.tgTypeaheadDisplayClean?i.displayClean="true"===a.tgTypeaheadDisplayClean:i.displayClean=e&&e.displayClean||!1,a.tgTypeaheadTagsTransform?i.tagsTransform="true"===a.tgTypeaheadTagsTransform:i.tagsTransform=e&&e.tagsTransform||!1,a.tgTypeaheadTagManagerTemplateUrl?i.tagManagerTemplateUrl=a.tgTypeaheadTagManagerTemplateUrl:i.tagManagerTemplateUrl=e&&e.tagManagerTemplateUrl||"tg-typeahead-tag-manager.tpl.html",a.tgTypeaheadTagTemplateUrl?i.tagTemplateUrl=a.tgTypeaheadTagTemplateUrl:i.tagTemplateUrl=e&&e.tagTemplateUrl||"tg-typeahead-tag.tpl.html",a.tgTypeaheadMultiselection?i.multiSelection="false"!==a.tgTypeaheadMultiselection:i.multiSelection=!e||e.multiSelection!==!1,i}function c(e,i,n,c){function u(){f&&a(function(){n.required?f.$setValidity("tagsRequired",0!==e.$tags.length):f.$setValidity("tagsRequired",!0)})}function m(){var t=e.$templates.main.wrapper,r=e.$findElementInTemplate(t,".tg-typeahead__input-container"),a=e.$findElementInTemplate(t,".tg-typeahead__input");if(r&&a){if(1===e.$tags.length){var n=i.width(),o=function(){var t,r,a=0,i=e.$findElementInTemplate(e.$templates.tagManager.wrapper,".tg-typeahead__tag");return i&&i.each(function(){t=angular.element(this),r=t.outerWidth()+(parseInt(t.css("margin-left"))||0)+(parseInt(t.css("margin-right"))||0),a+=r,a>n&&(a=r)}),a}();if(o>0){var c=n-o,d=100>c?n:c;return d>=9&&(d-=9),void r.css("width",d+"px")}}r.css("width","100%")}}function g(){var t=e.$findElementInTemplate(e.$templates.tagManager.wrapper,".tg-typeahead__tag-manager");if(t){var r=t.get(0);r&&t.scrollTop(r.scrollHeight)}}var h,y=c[0],f=c[1];e=y.$scope;var _=e.$parent,$=o(t(n.tgTypeaheadTagManager)(_),_,n);e.$tags=[],e.$tagsOrder=function(){return 0},$.orderBy?e.$tagsOrder=$.orderBy:$.ascendingOrder&&(e.$tagsOrder=["match.value"]),e.$templates.tagManager={wrapper:new d("tagManager.wrapper",$.tagManagerTemplateUrl),tag:new d("tagManager.tag",$.tagTemplateUrl)},e.$templates.tagManager.wrapper.style={},e.$templates.main.header=e.$templates.tagManager.wrapper,e.$stateHolder=angular.extend(e.$stateHolder||{},{tagsTransformed:!1}),e.$eventHolder=angular.extend(e.$eventHolder||{},{onTagSelected:t(n.tgTypeaheadTagSelected),onTagDeselected:t(n.tgTypeaheadTagDeselected),onApplySelection:t(n.tgTypeaheadApplySelection)}),e.$getTagsText=function(){return p.select(e.$tags,function(e){return e.match.value}).join(", ")},e.$canAddTag=function(){return 0===$.maxSelectedTags||$.maxSelectedTags>e.$tags.length},e.$addMatchedTag=function(t,r,a){if(!r&&e.$dataSets.length&&(r=e.$dataSets[0]),r){var i=a?r.suggested:r.queried,n=i.$getItem(t,_),o=new s(n,r.build());e.$addTag(o)}e.$closePopup()},e.$addTag=function(t,i){if(t&&t.match&&e.$canAddTag()){var n={context:e.tgTypeaheadContext,tag:t,sender:i||"Control",$internal:e};return y.events.emit("onTagAdding",n).then(function(){var r;if(t.dataSet){var i=e.$getModel(),o=i;o&&(e.$dataSets.length>1&&(o=o[t.dataSet.name]),r=-1,$.allowDuplicates||(r=p.each(o,function(e,r){return t.dataSet.comparator(e,t.match.model)?r:void 0},-1)),-1===r&&(o.push(t.match.model),e.$setModelDirty()))}return r=-1,$.allowDuplicates||(r=p.each(e.$tags,function(e,r){return e.dataSet.comparator(e.match.model,t.match.model)?r:void 0},-1)),-1===r?(e.$tags.push(t),h&&a.cancel(h),h=a(function(){g()},50),y.events.emit("onTagAdded",n),e.$eventHolder.onTagSelected(_,n),t):void 0})}return r.when(void 0)},e.$removeTag=function(t,a){var i=e.$tags.indexOf(t);if(-1!==i){var n={context:e.tgTypeaheadContext,index:i,tag:t,sender:a||"Control",$internal:e};return y.events.emit("onTagRemoving",n).then(function(){if(t.dataSet){var r=e.$getModel(),a=r;if(e.$dataSets.length>1&&a&&(a=a[t.dataSet.name]),a){var i=-1;i=p.each(a,function(e,r){return t.dataSet.comparator(e,t.match.model)?r:void 0},-1),-1!==i&&(a.splice(i,1),e.$setModelDirty())}}i=e.$tags.indexOf(t),-1!==i&&(e.$tags.splice(i,1),y.events.emit("onTagRemoved",n),e.$eventHolder.onTagDeselected(_,n))})}return r.when(!1)},e.$findTag=function(t){return p.each(e.$tags,function(e){return e.dataSet.comparator(e.match.model,t.model)?e:void 0})},e.$clearTags=function(){for(var t=e.$tags.length-1;t>=0;t--)e.$removeTag(e.$tags[t])},e.hasAllSelected=function(t){var r=e.getDataSetSource(t);if(r&&r.matches.length>0){for(var a=0,i=r.matches.length;i>a;a++)if(!r.matches[a].selected)return!1;return!0}return!1},e.selectAll=function(t,r){r&&(r.stopPropagation(),r.ctrlKey=!0);var a=e.getDataSetSource(t);a&&p.forEach(a.matches,function(a,i){a.selected||e.$selectMatch(t,i,a,r)})},e.deselectAll=function(t,r){r&&(r.stopPropagation(),r.ctrlKey=!0);var a=e.getDataSetSource(t);a&&p.forEach(a.matches,function(a,i){a.selected&&e.$selectMatch(t,i,a,r)})},e.applySelections=function(t){var a=[];p.forEach(t,function(t){var r=e.getDataSetSource(t);r&&p.forEach(r.matches,function(r){var i,n=e.$findTag(r);if(r.selected)void 0===n&&(n=new s(r,t.build()),i=e.$addTag(n));else{var n=e.$findTag(r);void 0!==n&&(i=e.$removeTag(n))}i&&a.push(i)})}),r.all(a).then(function(){var t={context:e.tgTypeaheadContext,$internal:e};y.events.emit("onApplySelection",t),e.$eventHolder.onApplySelection(_,t)}),e.$closePopup()},y.$overrideFn("$applyMatch",function(e,t,r){r&&this.$baseFn(e,t)}),y.$overrideFn("$onOutsideClick",function(){e.$clearTypeahead(),this.$baseFn()}),y.$overrideFn("$onKeyDown",function(t){8===t.which&&null===e.$term?e.$isFocusedInput()&&e.$tags.length>0&&e.$removeTag(e.$tags[e.$tags.length-1]):this.$baseFn(t)}),y.$overrideFn("$getPlaceholder",function(){return this.$baseFn()}),y.$overrideFn("$isVisibleInput",function(){var t=this.$baseFn();return t&&$.maxSelectedTags>0&&$.maxSelectedTags<=e.$tags.length&&(t=!1),t&&e.$updateInputElement(),t}),y.$overrideFn("$isVisibleClear",function(){return $.displayClean&&e.$tags.length>1}),y.$overrideFn("$clear",function(t){this.$baseFn(t),e.$clearTags()}),y.$overrideFn("$selectMatch",function(t,r,a,i){var n={context:e.tgTypeaheadContext,dataSet:t,index:r,match:a};y.trigger("onMatchSelecting",n).then(function(){if($.postponedSelection)a.selected=!a.selected;else{var r=e.$findTag(a);void 0===r||$.allowDuplicates?(r=new s(a,t.build()),e.$addTag(r),a.selected=!0):(e.$removeTag(r),a.selected=!1)}$.postponedSelection||$.multiSelection&&i&&i.ctrlKey|i.metaKey||e.$onOutsideClick()})}),y.$overrideFn("$watchModel",function(){var t=e.$dataSets.length,r=t>1,a=function(t,r){var a=t.queried,i=[],n=[];p.forEach(r,function(r){var n=p.each(e.$tags,function(e){return e.dataSet.name===t.name&&e.dataSet.comparator(e.match.model,r)?e:void 0});if(!n){var o=a.$getItem(r,e.$parent),c=new l(r,o.model,o.value),d=new s(c,t.build());i.push(d)}}),p.forEach(e.$tags,function(e){if(e.dataSet.name===t.name){var a=p.each(r,function(t){return e.dataSet.comparator(e.match.model,t)?t:void 0});a||n.push(e)}}),p.forEach(n,function(t){e.$removeTag(t,"ModelUpdate")}),p.forEach(i,function(t){e.$addTag(t,"ModelUpdate")})};p.forEach(e.$dataSets,function(t){var i=function(){var a=e.$getModel();return a&&r?a[t.name]:a};e.$watchCollection(i,function(i){if(p.isArray(i))a(t,i);else if(r){var n=e.$getModel();n?n[t.name]=[]:(n=e.$prepareDefaultModel(),e.$setModel(n,!0))}else e.$setModel([],!0)})})}),y.$overrideFn("$prepareDefaultModel",function(){var t=1===e.$dataSets.length,r=e.$dataSets.length>1,a=null;return t?a=[]:r&&(a={},p.forEach(e.$dataSets,function(e){a[e.name]=[]})),a}),y.$overrideFn("$prepareModel",function(t){if(void 0===t)return e.$prepareDefaultModel();var r=1===e.$dataSets.length,a=e.$dataSets.length>1,i=[];return r?Array.isArray(t)&&t.length>0&&i.push({dataSet:e.$dataSets[0],source:t}):a&&(t&&!p.isArray(t)&&p.isObject(t)||(t={}),p.forEach(e.$dataSets,function(e){t.hasOwnProperty(e.name)&&Array.isArray(t[e.name])||(t[e.name]=[]),t[e.name].length>0&&i.push({dataSet:e,source:t[e.name]})})),i.length>0&&p.forEach(i,function(t){var r=t.dataSet,a=r.queried;p.forEach(t.source,function(t){var i=a.$getItem(t,e.$parent),t=new l(t,i.model,i.value),n=new s(t,r.build());e.$addTag(n,"ModelUpdate")})}),t}),y.$overrideFn("$prepareMatchModel",function(t,r){if(!$.allowDuplicates&&e.$tags.length>0){var a=e.$findTag(t);void 0!==a&&(t.selected=!0)}}),y.$overrideFn("$updateInputElement",function(){m(),$.maxLines>0&&(e.$tags.length>1?(e.$templates.tagManager.wrapper["class"]="clearfix",e.$templates.tagManager.wrapper.style["max-height"]=22*$.maxLines+"px",e.$templates.tagManager.wrapper.style["overflow-y"]="auto"):(e.$templates.tagManager.wrapper["class"]=void 0,e.$templates.tagManager.wrapper.style["max-height"]=void 0,e.$templates.tagManager.wrapper.style["overflow-y"]=void 0))}),y.getTags=function(){var t=[];return p.forEach(e.$tags,function(e){t.push(e)}),t},y.addTag=function(t,r){var a=new s(t,r.build());return e.$addTag(a)},y.removeTag=function(t){return e.$removeTag(t)},y.clearTags=function(){e.$clearTags()},y.switchToText=function(){e.$stateHolder.tagsTransformed=!0},y.switchToTags=function(){e.$stateHolder.tagsTransformed=!1,a(function(){e.$setInputFocus(),g()})},y.updateTagsOrder=function(){var t=e.$getModel();if(t){var r=e.$dataSets.length>1;p.sort(e.$tags,function(e,a){var i=t;r&&(i=t[e.dataSet.name]);var n=p.each(i,function(t,r){return e.dataSet.comparator(e.match.model,t)?r:void 0},0);r&&e.dataSet.name!==a.dataSet.name&&(i=t[a.dataSet.name]);var o=p.each(i,function(e,t){return a.dataSet.comparator(a.match.model,e)?t:void 0;
},0);return n-o})}},e.$watchCollection("$tags",function(){u()}),n.$observe("required",function(){u()})}var d=e.get("tgComponentRenderTemplateModel"),l=e.get("tgTypeaheadMatchModel"),s=e.get("tgTypeaheadTagModel"),p=e.get("tgUtilities");return{pre:c,post:void 0}}}}function a(e,t){return{restrict:"A",require:["tgTypeahead"],scope:!1,priority:2,compile:function(r,a){function i(e,r,a,i){var d=i[0];e=d.$scope,e.$templates.filterManager={wrapper:new o("filterManager.wrapper",a.tgTypeaheadFilterManagerTemplateUrl||"tg-typeahead-filter-manager.tpl.html"),tag:new o("filterManager.tag",a.tgTypeaheadFilterTagTemplateUrl||"tg-typeahead-filter-tag.tpl.html")},e.$templates.main.header=e.$templates.filterManager.wrapper,e.$filters={tags:[],active:null},e.initFilterManager=function(){e.clearFilterTags(),e.$clearTypeahead(),e.addFilterTag(new c(null)).then(function(t){e.$filters.active=t})},e.canAddFilterTag=function(){return 0===n||n>e.$filters.tags.length},e.addFilterTag=function(r){if(r&&!r.match&&e.canAddFilterTag()){var a={context:e.tgTypeaheadContext,filterTag:r};return d.events.emit("onFilterTagAdding",a).then(function(){return e.$filters.tags.push(r),d.events.emit("onFilterTagAdded",a),r})}return t.when(void 0)},e.removeFilterTag=function(r){var a=e.$filters.tags.indexOf(r);if(-1!==a){var i={context:e.tgTypeaheadContext,filterTag:r};return d.events.emit("onFilterTagRemoving",i).then(function(){return e.$filters.tags.splice(a,1),e.selectFilterMatch(null,r),d.events.emit("onFilterTagRemoved",i),!0})}return t.when(!1)},e.clearFilterTags=function(){e.$filters.tags.length=0},e.selectFilterMatch=function(t,r){if(r=r||e.$filters.active){r.match=t;var a=null,i=e.$filters.tags.length;i>0&&(a=e.$filters.tags[i-1]),(!a||a.match)&&e.addFilterTag(new c(null)).then(function(t){e.$filters.active=t})}e.$clearTypeahead(),e.$closePopup()},e.getAppliedFilters=function(){var t=[];return e.$filters.tags.forEach(function(e){e.filter&&e.match&&t.push({type:e.filter.type,value:e.match,tag:e})}),t},e.$onFilterTypeSelect=function(t,r){var a={context:e.tgTypeaheadContext,filterTag:t,filter:r};return d.events.emit("onFilterTypeSelecting",a).then(function(){d.events.emit("onFilterTypeSelected",a)})},d.$overrideFn("$prepareSourceContext",function(t){return{filters:e.getAppliedFilters(),currentFilter:e.$filters.active}}),d.$overrideFn("$isVisibleInput",function(){var t=this.$baseFn(),r=0;return t&&(e.$filters.tags.forEach(function(e){e.match&&r++}),n>0&&r>=n&&(t=!1)),t&&e.$updateInputElement(),t}),d.$overrideFn("$updateInputElement",function(){}),d.events.on("onMatchSelected",function(){e.initFilterManager()}),d.initFilterManager=function(){e.initFilterManager()},d.getAppliedFilters=function(){return e.getAppliedFilters()},d.getCurrentFilter=function(){return e.$filters.active},d.refreshFilters=function(){var t,r={context:e.tgTypeaheadContext,filterTags:e.$filters.tags};d.events.emit("onFilterTagsChange",r),e.tgTypeaheadDefaultFilter&&(t=e.$watch("$filters.active.filter",function(e,r,a){if(e){var i,n=a.$filters.active;i=n.filters.filter(function(e){return e.type===a.tgTypeaheadDefaultFilter})[0],n.filter=i||e,t()}}))},e.$watchCollection("$filters.tags",function(){d.refreshFilters()},!0),e.initFilterManager()}var n=parseInt(a.tgTypeaheadMaxUsedFilters)||0,o=e.get("tgComponentRenderTemplateModel"),c=e.get("tgTypeaheadFilterTagModel");return{pre:i,post:void 0}}}}function i(e){return e.transcludeTemplate("^?tgTypeahead","$setHeaderTemplate")}function n(e){return e.transcludeTemplate("^?tgTypeahead","$setFooterTemplate")}function o(e){return e.transcludeTemplate("^?tgTypeahead","$setPopupHeaderTemplate")}function c(e){return e.transcludeTemplate("^?tgTypeahead","$setPopupFooterTemplate")}function d(e){return e.transcludeTemplate("^?tgTypeaheadDataSet","$setHeaderTemplate")}function l(e){return e.transcludeTemplate("^?tgTypeaheadDataSet","$setItemTemplate")}function s(e){return e.transcludeTemplate("^?tgTypeaheadDataSet","$setFooterTemplate")}function p(e){return e.transcludeTemplate("^?tgTypeahead","$setSuggestedPopupHeaderTemplate")}function u(e){return e.transcludeTemplate("^?tgTypeahead","$setSuggestedPopupFooterTemplate")}function m(){function e(e){this.name=e,this.data=void 0,this.templates=void 0,this.queried=void 0,this.suggested=void 0,this.comparator=function(e,t){return angular.equals(e,t)}}return e.prototype.build=function(){return{name:this.name,comparator:this.comparator}},e}function g(){function e(e,t,r){this.source=e,this.matches=[],this.displayedItems=t,this.limitStep=r,this.limit=t,this.active=!0,this.activeIndex=-1,this.inProgress=!1}return e.prototype.$hasMore=function(){return this.limit<this.matches.length},e.prototype.$showAll=function(e){this.limit=this.matches.length,e&&e.stopPropagation()},e.prototype.$showMore=function(e){var t=this.limit+this.limitStep;t>this.matches.length&&(t=this.matches.length),t<this.limitStep&&(t=this.limitStep),this.limit=t,e&&e.stopPropagation()},e.prototype.$hideMore=function(e){this.limit=this.displayedItems,e&&e.stopPropagation()},e.prototype.$getItem=function(e,t){var r={},a=this.source.itemName,i=this.source.viewMapper,n=this.source.modelMapper;return r[a]=e,{model:n(t,r),value:i(t,r)}},e}function h(){function e(e,t,r){this.data=e,this.model=t,this.value=r,this.selected=!1,this.disabled=!1}return e}function y(){function e(e,t,r){this.data=e,this.model=t,this.value=r,this.selected=!1,this.disabled=!1,this.suggested=!0}return e}function f(){function e(e,t){this.match=e,this.dataSet=t}return e}function _(){function e(e){this.match=e,this.filter=void 0,this.filters=[]}return e}angular.module("tg.components").run(["$templateCache",function(e){e.put("tg-typeahead.tpl.html",'<div class="tg-typeahead"                       ng-class="tgTypeaheadWrapClass">                   <div tg-component-render-template="$templates.main.header"></div>                   <div tg-component-render-template="$templates.main.container"></div>                   <div tg-component-render-template="$templates.main.footer"></div>                   <div class="tg-typeahead__suggestions-wrap"                         tg-component-render-template="$templates.popup.wrapper"></div>                   <div class="tg-typeahead__suggestions-wrap"                         ng-if="$stateHolder.hasSuggestions"                         tg-component-render-template="$templates.suggestedPopup.wrapper"></div>                </div>'),e.put("tg-typeahead-container.tpl.html",'<div class="tg-typeahead__input-container"                       ng-show="$isVisibleInput() && !$stateHolder.tagsTransformed">                    <a href="" class="tg-typeahead__clear-link"                        ng-show="!$stateHolder.loader && $isVisibleClear()"                        ng-click="$clear($event);">Remove All</a>                    <div class="tg-typeahead__loader"                          ng-show="$stateHolder.loader"></div>                    <div class="tg-typeahead__input-wrap">                        <input type="text" class="tg-typeahead__input"                                placeholder="{{ $getPlaceholder() }}"                                ng-model="$term"                                ng-disabled="$isDisabled()">                    </div>                </div>'),e.put("tg-typeahead-popup.tpl.html",'<ul class="tg-typeahead__suggestions"                      ng-if="$stateHolder.popup.opened"                      ng-style="$templates.popup.wrapper.style">                    <li class="tg-typeahead__suggestions-header"                         tg-component-render-template="$templates.popup.header"></li>                    <li class="tg-typeahead__suggestions-container"                         tg-when-scrolled="$onPopupScrolled($event);">                        <div ng-repeat="$dataSet in $dataSets | filter:{ queried: { active: true } }">                            <div class="tg-typeahead__suggestions-group-header"                                  tg-component-render-template="$dataSet.templates.header || $templates.dataSet.header"></div>                            <ul class="tg-typeahead__suggestions-group">                                <li class="tg-typeahead__suggestions-group-item"                                     ng-repeat="$match in $dataSet.queried.matches | limitTo:$dataSet.queried.limit"                                     ng-class="{ active: $index === $dataSet.queried.activeIndex, selected: $match.selected, disabled: $match.disabled }">                                    <div tg-component-render-template="$dataSet.templates.item || $templates.dataSet.item"></div>                                </li>                            </ul>                            <div class="tg-typeahead__suggestions-group-footer"                                  tg-component-render-template="$dataSet.templates.footer || $templates.dataSet.footer"></div>                        </div>                    </li>                    <li class="tg-typeahead__suggestions-footer"                         tg-component-render-template="$templates.popup.footer"></li>                </ul>'),e.put("tg-typeahead-dataSet-item.tpl.html",'<div ng-bind-html="$match.value | tgTrustedHtml"></div>'),e.put("tg-typeahead-suggested-popup.tpl.html",'<ul class="tg-typeahead__suggestions"                      ng-if="$stateHolder.suggestedPopup.opened"                      ng-style="$templates.suggestedPopup.wrapper.style">                    <li class="tg-typeahead__suggestions-header"                         tg-component-render-template="$templates.suggestedPopup.header"></li>                    <li class="tg-typeahead__suggestions-container"                         tg-when-scrolled="$onPopupScrolled($event);">                        <div ng-repeat="$dataSet in $dataSets | filter:{ suggested: { active: true } }">                            <div class="tg-typeahead__suggestions-group-header"                                  tg-component-render-template="$dataSet.templates.header || $templates.dataSet.header"></div>                            <ul class="tg-typeahead__suggestions-group">                                <li class="tg-typeahead__suggestions-group-item"                                     ng-repeat="$match in $dataSet.suggested.matches | limitTo:$dataSet.suggested.limit"                                     ng-class="{ active: $index === $dataSet.suggested.activeIndex, selected: $match.selected, disabled: $match.disabled }">                                    <div tg-component-render-template="$dataSet.templates.item || $templates.dataSet.item"></div>                                </li>                            </ul>                            <div class="tg-typeahead__suggestions-group-footer"                                  tg-component-render-template="$dataSet.templates.footer || $templates.dataSet.footer"></div>                        </div>                    </li>                    <li class="tg-typeahead__suggestions-footer"                         tg-component-render-template="$templates.suggestedPopup.footer"></li>                </ul>'),e.put("tg-typeahead-suggested-dataSet-item.tpl.html",'<div ng-bind-html="$match.value | tgTrustedHtml"></div>'),e.put("tg-typeahead-tag-manager.tpl.html",'<div class="tg-typeahead__tag-manager"                       ng-class="$templates.tagManager.wrapper.class"                       ng-style="$templates.tagManager.wrapper.style"                       ng-switch="$stateHolder.tagsTransformed">                   <div ng-switch-when="false">                       <div ng-repeat="$tag in $tags | orderBy:$tagsOrder"                             tg-component-render-template="$templates.tagManager.tag"></div>                   </div>                   <div class="tg-typeahead__tags-text"                         ng-switch-when="true">{{ $getTagsText() }}</div>                </div>'),e.put("tg-typeahead-tag.tpl.html",'<div class="tg-typeahead__tag">                    <span class="tg-typeahead__tag-remove fa fa-times" rel="tooltip"                           tooltip-html-unsafe="delete"                           tooltip-placement="right"                           ng-class="{\'disabled\': $isDisabled()}"                           ng-click="!$isDisabled() && $removeTag($tag)"></span>                    <span class="tg-typeahead__tag-name"                           ng-bind-html="$tag.match.value | tgTrustedHtml"></span>                </div>'),e.put("tg-typeahead-filter-manager.tpl.html",'<div class="tg-typeahead__tag-manager">                    <div ng-repeat="$filterTag in $filters.tags">                        <div tg-component-render-template="$templates.filterManager.tag"></div>                    </div>                </div>'),e.put("tg-typeahead-filter-tag.tpl.html",'<div class="tg-typeahead__tag-wrap">                    <div style="display: table-cell; vertical-align: top;" ng-switch="!!$filterTag.match">                        <div class="tg-typeahead__tag-filter" ng-switch-when="true" ng-bind-html="$filterTag.filter.value | tgTrustedHtml"></div>                        <select class="tg-typeahead__tag-filter"                                 ng-model="$filterTag.filter"                                 ng-change="$onFilterTypeSelect($filterTag, $filterTag.filter);"                                 ng-options="filter.value for filter in $filterTag.filters track by filter.type"                                 ng-switch-default=""></select>                    </div>                    <div class="tg-typeahead__tag" style="display: table-cell; vertical-align: top;" ng-show="$filterTag.match !== null">                       <span class="tg-typeahead__tag-remove fa fa-times" rel="tooltip"                              tooltip-placement="right"                              tooltip-html-unsafe="delete"                              ng-class="{\'disabled\': $isDisabled()}"                              ng-click="!$isDisabled() && removeFilterTag($filterTag)"></span>                       <span class="tg-typeahead__tag-name" ng-bind-html="$filterTag.match | tgTrustedHtml"></span>                    </div>                </div>')}]).directive("tgTypeahead",e).directive("tgTypeaheadDataSet",t).directive("tgTypeaheadTagManager",r).directive("tgTypeaheadFilterManager",a).directive("tgTypeaheadHeader",i).directive("tgTypeaheadFooter",n).directive("tgTypeaheadPopupHeader",o).directive("tgTypeaheadPopupFooter",c).directive("tgTypeaheadDataSetHeader",d).directive("tgTypeaheadDataSetItem",l).directive("tgTypeaheadDataSetFooter",s).directive("tgTypeaheadSuggestedPopupHeader",p).directive("tgTypeaheadSuggestedPopupFooter",u).factory("tgTypeaheadDataSetModel",m).factory("tgTypeaheadSourceModel",g).factory("tgTypeaheadMatchModel",h).factory("tgTypeaheadSuggestedMatchModel",y).factory("tgTypeaheadTagModel",f).factory("tgTypeaheadFilterTagModel",_),e.$inject=["$tgComponents","$injector","$compile","$parse","$q","$timeout","$interval","$document"],t.$inject=["$injector","$parse"],r.$inject=["$injector","$parse","$q","$timeout"],a.$inject=["$injector","$q"],i.$inject=["tgComponentsTemplate"],n.$inject=["tgComponentsTemplate"],o.$inject=["tgComponentsTemplate"],c.$inject=["tgComponentsTemplate"],d.$inject=["tgComponentsTemplate"],l.$inject=["tgComponentsTemplate"],s.$inject=["tgComponentsTemplate"],p.$inject=["tgComponentsTemplate"],u.$inject=["tgComponentsTemplate"]}(),function(){"use strict";angular.module("tg.components").directive("tgWhenScrolled",["$parse",function(e){return{restrict:"A",link:function(t,r,a){var i=e(a.tgWhenScrolled);r.bind("scroll",function(e){this.scrollTop+this.offsetHeight>=this.scrollHeight&&(i(t,{$event:e}),t.$digest())})}}}])}(),function(){"use strict";function e(e){var t={},r=e["new"]();return{$addInstance:function(a){if(!a||!a.$name)throw new Error("Invalid instance or instance name.");t.hasOwnProperty(a.$name)&&this.$removeInstance(a),a.$supportEvents&&!a.hasOwnProperty("events")&&(a.events=e["new"](),a.trigger=function(e){var t=[];return Array.prototype.push.apply(t,arguments),t.push(a),a.events.emit.apply(a.events,t)}),t[a.$name]=a,r.emit("$onInstanceAdded",a)},$removeInstance:function(e){if(!e||!e.$name)throw new Error("Invalid instance or instance name.");if(!t.hasOwnProperty(e.$name))throw new Error("Component with instance name `"+e.$name+"` doesn't exist.");delete t[e.$name],r.emit("$onInstanceRemoved",e)},hasInstance:function(e){if(!e)throw new Error("Invalid instance name.");return t.hasOwnProperty(e)},getInstance:function(e){if(!this.hasInstance(e))throw new Error("Component with instance name `"+e+"` doesn't exist.");return t[e]||null},getInstances:function(){var e=[];for(var r in t)e.push(t[r]);return e},events:r}}function t(e){var t={},r=e["new"]();return{$addInstance:function(a){if(!a||!a.$name)throw new Error("Invalid instance or instance name.");if(t.hasOwnProperty(a.$name))throw new Error("Component with instance name `"+a.$name+"` already exist.");a.$supportEvents&&!a.hasOwnProperty("events")&&(a.events=e["new"](),a.trigger=function(e){var t=[];return Array.prototype.push.apply(t,arguments),t.push(a),a.events.emit.apply(a.events,t)}),t[a.$name]=a,r.emit("$onFormInstanceAdded",a)},$removeInstance:function(e){if(!e||!e.$name)throw new Error("Invalid instance or instance name.");if(!t.hasOwnProperty(e.$name))throw new Error("Component with instance name `"+e.$name+"` doesn't exist.");delete t[e.$name],r.emit("$onFormInstanceRemoved",e)},hasInstance:function(e){if(!e)throw new Error("Invalid instance name.");return t.hasOwnProperty(e)},getInstance:function(e){return t[e]||void 0},getInstances:function(){var e=[];for(var r in t)e.push(t[r]);return e},events:r}}function r(e){function t(){this.handlers={},this.on=function(e,t){if(angular.isString(e)&&e.length>0&&angular.isFunction(t)){this.handlers.hasOwnProperty(e)||(this.handlers[e]=[]);var r=this.handlers[e];return r.push(t),function(){var e=r.indexOf(t);-1!==e&&r.splice(e,1)}}},this.emit=function(t){var r=[];if(angular.isString(t)&&t.length>0&&this.handlers.hasOwnProperty(t)){var a=[];Array.prototype.push.apply(a,arguments),a.shift(),angular.forEach(this.handlers[t],function(e){var t=e.apply(this,a);if(t){var i=angular.isFunction(t.then);i&&r.push(t)}})}return e.all(r)},this.has=function(e){return this.handlers[e]&&this.handlers[e].length>0},this.clear=function(e,t){if(void 0!==e){if(angular.isString(e)&&e.length>0)if(angular.isFunction(t)){var r=this.handlers[e].indexOf(t);-1!==r&&this.handlers[e].splice(r,1)}else delete this.handlers[e]}else this.handlers={}}}return{"new":function(){return new t}}}function a(e,t,r,a){return{restrict:"A",scope:!1,compile:function(i,n){function o(r,i,n){i.empty();var o=c(r);o&&o.template?(o.template(r,function(e){i.append(e)}),o.appendTo&&i.detach().appendTo(o.appendTo),o.render(i)):o&&o.templateUrl?e.get(o.templateUrl,{cache:a}).success(function(e){i.append(t(e.trim())(r)),o.appendTo&&i.detach().appendTo(o.appendTo),o.render(i)}):i.remove(),o&&r.$on("$destroy",function(){o.destroy()})}var c=r(n.tgComponentRenderTemplate);return{pre:void 0,post:o}}}}function i(e){function t(e,t,r,a){this.name=e,this.templateUrl=t,this.template=void 0,this.appendTo=!1,this.strictWidth=!1,this.element=void 0,this.style=void 0,this["class"]=void 0,this.renderCallback=r,this.destroyCallback=a}var r=e.get("tgUtilities");return t.prototype.setTemplate=function(e){this.template=e},t.prototype.render=function(e){this.element=e,r.isFunction(this.renderCallback)&&this.renderCallback(this)},t.prototype.destroy=function(){r.isFunction(this.destroyCallback)&&this.destroyCallback(this),this.element=null},t}function n(){function e(e,t){return{restrict:"A",require:e,transclude:!0,scope:!1,compile:function(){function e(e,r,a,i,n){t&&i&&i.hasOwnProperty(t)&&i[t](n)}function r(e,t,r){t.remove()}return{pre:e,post:r}}}}return{transcludeTemplate:e}}angular.module("tg.extensions").factory("$tgComponents",e).factory("$tgForms",t).factory("tgEventsProcessor",r),e.$inject=["tgEventsProcessor"],t.$inject=["tgEventsProcessor"],r.$inject=["$q"],angular.module("tg.extensions").directive("tgComponentRenderTemplate",a).factory("tgComponentRenderTemplateModel",i).factory("tgComponentsTemplate",n),a.$inject=["$http","$compile","$parse","$templateCache"],i.$inject=["$injector"]}(),angular.module("app").controller("ComponentsController",["$scope",function(e){"use strict"}]),angular.module("app").controller("FormController",["$scope","$timeout","$q",function(e,t,r){"use strict";e.equalTo=function(e,t){return e===t},e.someAsyncValidation=function(e){var a=r.defer();return t(function(){var t="123"===e;t?a.resolve():a.reject()},2e3),a.promise},e.isDateValid=function(e,t,r){t--;var a=new Date(e,t,r);return a.getDate()==r&&a.getMonth()==t&&a.getFullYear()==e},e.isDateValidAsync=function(a,i,n){var o=r.defer();return t(function(){e.isDateValid(a,i,n)?o.resolve():o.reject()},2e3),o.promise}}]),function(){"use strict";function e(e,t,r){var a=e[t]||angular.noop;e[t]=function(){var e,t=this.$baseFn;return this.$baseFn=a,e=r.apply(this,arguments),this.$baseFn=t,e}}function t(t){return{restrict:"EA",require:"form",compile:function(){function r(r,a,i,n){var o=[],c=[];n.$$addFormMessage=function(e){c.push(e)},n.$$removeFormMessage=function(e){var t=c.indexOf(e);-1!==t&&e.splice(t,1)},n.$$validateCustoms=function(e){Array.isArray(e)||(e=[e]),t(function(){o.forEach(function(t){t.hasOwnProperty("$hasCustomValidations")&&-1===e.indexOf(t)&&t.$validate()}),n.$$updateFormErrors()})},n.$$updateFormErrors=function(){c.forEach(function(e){e.setError(null)});for(var e in n.$error)if(n.$error.hasOwnProperty(e)){var t=n.$error[e];Array.isArray(t)||(t=[t]),t.forEach(function(t){t.$invalid&&c.forEach(function(r){t.$name===r.name&&r.setError(r.getMessage(e))})})}},n.$$updateControlErrors=function(e){if(e.$invalid)for(var t in e.$error)e.$error.hasOwnProperty(t)&&e.$error[t]&&c.forEach(function(r){e.$name===r.name&&r.setError(r.getMessage(t))})},e(n,"$addControl",function(e){this.$baseFn(e),o.push(e);var t=function(t){return n.$$validateCustoms(e),t};e.$parsers.push(t),e.$formatters.push(t)}),e(n,"$removeControl",function(e){this.$baseFn(e);var t=o.indexOf(e);-1!==t&&o.splice(t,1)})}return{pre:r}}}}function r(t){return{restrict:"EA",require:["ngModel","^?form"],compile:function(){function r(e,t){var r=e.substring(t.length);return r.charAt(0).toLowerCase()+r.slice(1)}function a(a,i,n,o){var c=o[0],d=o[1],l="tgValidate",s="tgValidateAsync";for(var p in n)if(n.hasOwnProperty(p)){var u=p.indexOf(l);if(0===u){c.$hasCustomValidations=!0;var m=n[p],g=0===p.indexOf(s),h=g?c.$asyncValidators:c.$validators,y=r(p,g?s:l);h[y]=function(e,r,i,n){var o=a.$eval(r,{$form:d,$value:n,$model:i});return e&&(o&&o.then||(o=o?t.resolve(o):t.reject(o))),o}.bind(null,g,m)}}d&&d.hasOwnProperty("$$updateControlErrors")&&e(c,"$$runValidators",function(e,t,r){this.$baseFn(e,t,function(e){r(e),e||d.$$updateControlErrors(c)})})}return{pre:a}}}}function a(){return{restrict:"EA",require:"^form",template:'<input type="hidden" ng-model="__validator" name="@">',replace:!0}}function i(){return{restrict:"EA",require:"^form",scope:!0,template:'<span class="form-message">{{error}}</span>',compile:function(){function e(e,t,r,a){if(a.hasOwnProperty("$$addFormMessage")){var i={name:r.name||"@",getMessage:function(e){return e&&(e+="Message",r.hasOwnProperty(e))?r[e]:void 0},setError:function(t){e.error=t}};a.$$addFormMessage(i),e.$on("$destroy",function(){a.$$removeFormMessage(i)})}}return{pre:e}}}}angular.module("app").directive("tgForm",t).directive("ngModel",r).directive("tgFormValidator",a).directive("tgFormMessage",i),t.$inject=["$timeout"],r.$inject=["$q"]}(),angular.module("app").controller("HomeController",["$scope",function(e){"use strict"}]);